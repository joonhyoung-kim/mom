!function(y,e,P){"use strict";var v="ht",x=y[v],j=x.Default,E=j.getInternal();E.addMethod(j,{toDxf:function(G){var n=new x.DxfWriter;n.snapshotView(G);var r=n.write();return r},viewDxf:function(c,m,L){var B=new x.DxfViewer(c,L);c.addBottomPainter(B),B.parseFile(m)}}),function(V){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=V();else if("function"==typeof define&&define.amd)define([],V);else{var B;B="undefined"!=typeof y?y:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,B.DxfParser=V()}}(function(){var q;return function j(P,t,p){function h(C,K){if(!t[C]){if(!P[C]){var f="function"==typeof require&&require;if(!K&&f)return f(C,!0);if(_)return _(C,!0);var r=new Error("Cannot find module '"+C+"'");throw r.code="MODULE_NOT_FOUND",r}var y=t[C]={exports:{}};P[C][0].call(y.exports,function(Y){var Z=P[C][1][Y];return h(Z?Z:Y)},y,y.exports,j,P,t,p)}return t[C].exports}for(var _="function"==typeof require&&require,D=0;D<p.length;D++)h(p[D]);return h}({1:[function(h,f){f.exports=[0,16711680,16776960,65280,65535,255,16711935,16777215,8421504,12632256,16711680,16744319,13369344,13395558,10027008,10046540,8323072,8339263,4980736,4990502,16727808,16752511,13382400,13401958,10036736,10051404,8331008,8343359,4985600,4992806,16744192,16760703,13395456,13408614,10046464,10056268,8339200,8347455,4990464,4995366,16760576,16768895,13408512,13415014,10056192,10061132,8347392,8351551,4995328,4997670,16776960,16777087,13421568,13421670,10000384,10000460,8355584,8355647,5000192,5000230,12582656,14679935,10079232,11717734,7510016,8755276,6258432,7307071,3755008,4344870,8388352,12582783,6736896,10079334,5019648,7510092,4161280,6258495,2509824,3755046,4194048,10485631,3394560,8375398,2529280,6264908,2064128,5209919,1264640,3099686,65280,8388479,52224,6736998,38912,5019724,32512,4161343,19456,2509862,65343,8388511,52275,6737023,38950,5019743,32543,4161359,19475,2509871,65407,8388543,52326,6737049,38988,5019762,32575,4161375,19494,2509881,65471,8388575,52377,6737074,39026,5019781,32607,4161391,19513,2509890,65535,8388607,52428,6737100,39064,5019800,32639,4161407,19532,2509900,49151,8380415,39372,6730444,29336,5014936,24447,4157311,14668,2507340,32767,8372223,26316,6724044,19608,5010072,16255,4153215,9804,2505036,16383,8364031,13260,6717388,9880,5005208,8063,4149119,4940,2502476,255,8355839,204,6710988,152,5000344,127,4145023,76,2500172,4129023,10452991,3342540,8349388,2490520,6245528,2031743,5193599,1245260,3089996,8323327,12550143,6684876,10053324,4980888,7490712,4128895,6242175,2490444,3745356,12517631,14647295,10027212,11691724,7471256,8735896,6226047,7290751,3735628,4335180,16711935,16744447,13369548,13395660,9961624,9981080,8323199,8339327,4980812,4990540,16711871,16744415,13369497,13395634,9961586,9981061,8323167,8339311,4980793,4990530,16711807,16744383,13369446,13395609,9961548,9981042,8323135,8339295,4980774,4990521,16711743,16744351,13369395,13395583,9961510,9981023,8323103,8339279,4980755,4990511,3355443,5987163,8684676,11382189,14079702,16777215]},{}],2:[function(j,Q){function o(F){this._pointer=0,this._data=F,this._eof=!1}function Z(H,v){return 9>=H?v:H>=10&&59>=H?parseFloat(v):H>=60&&99>=H?parseInt(v):H>=100&&109>=H?v:H>=110&&149>=H?parseFloat(v):H>=160&&179>=H?parseInt(v):H>=210&&239>=H?parseFloat(v):H>=270&&289>=H?parseInt(v):H>=290&&299>=H?X(v):H>=300&&369>=H?v:H>=370&&389>=H?parseInt(v):H>=390&&399>=H?v:H>=400&&409>=H?parseInt(v):H>=410&&419>=H?v:H>=420&&429>=H?parseInt(v):H>=430&&439>=H?v:H>=440&&459>=H?parseInt(v):H>=460&&469>=H?parseFloat(v):H>=470&&481>=H?v:999===H?v:H>=1e3&&1009>=H?v:H>=1010&&1059>=H?parseFloat(v):H>=1060&&1071>=H?parseInt(v):(console.log("WARNING: Group code does not have a defined type: %j",{code:H,value:v}),v)}function X(p){if("0"===p)return!1;if("1"===p)return!0;throw TypeError("String '"+p+"' cannot be cast to Boolean type")}o.prototype.next=function(){var l;if(!this.hasNext())throw this._eof?new Error("Cannot call 'next' after EOF group has been read"):new Error("Unexpected end of input: EOF group not read before end of file. Ended on code "+this._data[this._pointer]);return l={code:parseInt(this._data[this._pointer])},this._pointer++,l.value=Z(l.code,this._data[this._pointer].trim()),this._pointer++,0===l.code&&"EOF"===l.value&&(this._eof=!0),l},o.prototype.hasNext=function(){return this._eof?!1:this._pointer>this._data.length-2?!1:!0},o.prototype.isEOF=function(){return this._eof},Q.exports=o},{}],3:[function(g,A){function X(){}function i(X){Z.debug("unhandled group "+W(X))}function W(p){return p.code+":"+p.value}function H(Z){return y[Z]}var C=g("./DxfArrayScanner.js"),y=g("./AutoCadColorIndex"),Z=g("loglevel");Z.setLevel("error"),X.prototype.parse=function(){throw new Error("read() not implemented. Use readSync()")},X.prototype.parseSync=function(l){return"string"==typeof l?this._parse(l):(console.error("Cannot read dxf source of type `"+typeof l),null)},X.prototype.parseStream=function(I,H){function a(g){T+=g}function Y(){try{var v=s._parse(T)}catch(B){return H(B)}H(null,v)}function M(s){H(s)}var T="",s=this;I.on("data",a),I.on("end",Y),I.on("error",M)},X.prototype._parse=function(J){var k,$,f={},O=0,z=J.split(/\r\n|\r|\n/g);if(k=new C(z),!k.hasNext())throw Error("Empty file");var Y=function(){for($=k.next();!k.isEOF();)if(0===$.code&&"SECTION"===$.value){if($=k.next(),2!==$.code){console.error("Unexpected code %s after 0:SECTION",W($)),$=k.next();continue}"HEADER"===$.value?(Z.debug("> HEADER"),f.header=t(),Z.debug("<")):"BLOCKS"===$.value?(Z.debug("> BLOCKS"),f.blocks=X(),Z.debug("<")):"ENTITIES"===$.value?(Z.debug("> ENTITIES"),f.entities=h(!1),Z.debug("<")):"TABLES"===$.value?(Z.debug("> TABLES"),f.tables=c(),Z.debug("<")):"EOF"===$.value?Z.debug("EOF"):Z.warn("Skipping section '%s'",$.value)}else $=k.next()},D=function(R,a){return $.code===R&&$.value===a},t=function(){var g=null,z=null,v={};for($=k.next();;){if(D(0,"ENDSEC")){g&&(v[g]=z);break}9===$.code?(g&&(v[g]=z),g=$.value):10===$.code?z={x:$.value}:20===$.code?z.y=$.value:30===$.code?z.z=$.value:z=$.value,$=k.next()}return $=k.next(),v},X=function(){var e,H={};for($=k.next();"EOF"!==$.value&&!D(0,"ENDSEC");)D(0,"BLOCK")?(Z.debug("block {"),e=b(),Z.debug("}"),p(e),e.name?H[e.name]=e:Z.error('block with handle "'+e.handle+'" is missing a name.')):(i($),$=k.next());return H},b=function(){var Z={};for($=k.next();"EOF"!==$.value;){switch($.code){case 1:Z.xrefPath=$.value,$=k.next();break;case 2:Z.name=$.value,$=k.next();break;case 3:Z.name2=$.value,$=k.next();break;case 5:Z.handle=$.value,$=k.next();break;case 8:Z.layer=$.value,$=k.next();break;case 10:Z.position=a();break;case 67:Z.paperSpace=$.value&&1==$.value?!0:!1,$=k.next();break;case 70:0!=$.value&&(Z.type=$.value),$=k.next();break;case 100:$=k.next();break;case 330:Z.ownerHandle=$.value,$=k.next();break;case 0:if("ENDBLK"==$.value)break;k._pointer-=2,Z.entities=h(!0);break;default:i($),$=k.next()}if(D(0,"ENDBLK")){$=k.next();break}}return Z},c=function(){var G={};for($=k.next();"EOF"!==$.value&&!D(0,"ENDSEC");)if(D(0,"TABLE")){$=k.next();var z=w[$.value];z?(Z.debug($.value+" Table {"),G[w[$.value].tableName]=E(),Z.debug("}")):Z.debug("Unhandled Table "+$.value)}else $=k.next();return $=k.next(),G},F="ENDTAB",E=function(){var S,q=w[$.value],s={},G=0;for($=k.next();!D(0,F);)switch($.code){case 5:s.handle=$.value,$=k.next();break;case 330:s.ownerHandle=$.value,$=k.next();break;case 100:"AcDbSymbolTable"===$.value?$=k.next():(i($),$=k.next());break;case 70:G=$.value,$=k.next();break;case 0:$.value===q.dxfSymbolName?s[q.tableRecordsProperty]=q.parseTableRecords():(i($),$=k.next());break;default:i($),$=k.next()}var o=s[q.tableRecordsProperty];return o&&(o.constructor===Array?S=o.length:"object"==typeof o&&(S=e.keys(o).length),G!==S&&Z.warn("Parsed "+S+" "+q.dxfSymbolName+"'s but expected "+G)),$=k.next(),s},Q=function(){var O=[],u={};for(Z.debug("ViewPort {"),$=k.next();!D(0,F);)switch($.code){case 2:u.name=$.value,$=k.next();break;case 10:u.lowerLeftCorner=a();break;case 11:u.upperRightCorner=a();break;case 12:u.center=a();break;case 13:u.snapBasePoint=a();break;case 14:u.snapSpacing=a();break;case 15:u.gridSpacing=a();break;case 16:u.viewDirectionFromTarget=a();break;case 17:u.viewTarget=a();break;case 40:u.viewHeight=$.value,u.aspectRatio!==P&&(u.viewWidth=$.value*u.aspectRatio),$=k.next();break;case 41:u.aspectRatio=$.value,u.viewHeight!==P&&(u.viewWidth=$.value*u.viewHeight),$=k.next();break;case 42:u.lensLength=$.value,$=k.next();break;case 43:u.frontClippingPlane=$.value,$=k.next();break;case 44:u.backClippingPlane=$.value,$=k.next();break;case 45:u.viewHeight=$.value,$=k.next();break;case 50:u.snapRotationAngle=$.value,$=k.next();break;case 51:u.viewTwistAngle=$.value,$=k.next();break;case 79:u.orthographicType=$.value,$=k.next();break;case 110:u.ucsOrigin=a();break;case 111:u.ucsXAxis=a();break;case 112:u.ucsYAxis=a();break;case 110:u.ucsOrigin=a();break;case 281:u.renderMode=$.value,$=k.next();break;case 281:u.defaultLightingType=$.value,$=k.next();break;case 292:u.defaultLightingOn=$.value,$=k.next();break;case 330:u.ownerHandle=$.value,$=k.next();break;case 63:case 421:case 431:u.ambientColor=$.value,$=k.next();break;case 0:"VPORT"===$.value&&(Z.debug("}"),O.push(u),Z.debug("ViewPort {"),u={},$=k.next());break;default:i($),$=k.next()}return Z.debug("}"),O.push(u),O},d=function(){var r,C,O={},S={};for(Z.debug("LType {"),$=k.next();!D(0,"ENDTAB");)switch($.code){case 2:S.name=$.value,r=$.value,$=k.next();break;case 3:S.description=$.value,$=k.next();break;case 73:C=$.value,C>0&&(S.pattern=[]),$=k.next();break;case 40:S.patternLength=$.value,$=k.next();break;case 49:S.pattern.push($.value),$=k.next();break;case 0:Z.debug("}"),C>0&&C!==S.pattern.length&&Z.warn("lengths do not match on LTYPE pattern"),O[r]=S,S={},Z.debug("LType {"),$=k.next();break;default:$=k.next()}return Z.debug("}"),O[r]=S,O},v=function(){var f,C={},Q={};for(Z.debug("Layer {"),$=k.next();!D(0,"ENDTAB");)switch($.code){case 2:Q.name=$.value,f=$.value,$=k.next();break;case 62:Q.visible=$.value>0,Q.color=H(Math.abs($.value)),$=k.next();break;case 6:Q.lineType=$.value,$=k.next();break;case 0:"LAYER"===$.value&&(Z.debug("}"),C[f]=Q,Z.debug("Layer {"),Q={},f=P,$=k.next());break;default:i($),$=k.next()}return Z.debug("}"),C[f]=Q,C},w={VPORT:{tableRecordsProperty:"viewPorts",tableName:"viewPort",dxfSymbolName:"VPORT",parseTableRecords:Q},LTYPE:{tableRecordsProperty:"lineTypes",tableName:"lineType",dxfSymbolName:"LTYPE",parseTableRecords:d},LAYER:{tableRecordsProperty:"layers",tableName:"layer",dxfSymbolName:"LAYER",parseTableRecords:v}},h=function(f){var n=[],t=f?"ENDBLK":"ENDSEC";for($=k.next();;)if(0===$.code){if($.value===t)break;var i;if("LWPOLYLINE"===$.value)Z.debug("LWPOLYLINE {"),i=N(),Z.debug("}");else if("POLYLINE"===$.value)Z.debug("POLYLINE {"),i=l(),Z.debug("}");else if("LINE"===$.value)Z.debug("LINE {"),i=M(),Z.debug("}");else if("CIRCLE"===$.value)Z.debug("CIRCLE {"),i=q(),Z.debug("}");else if("ARC"===$.value)Z.debug("ARC {"),i=q(),Z.debug("}");else if("ELLIPSE"===$.value)Z.debug("ELLIPSE {"),i=s(),Z.debug("}");else if("SPLINE"===$.value)Z.debug("SPLINE {"),i=u(),Z.debug("}");else if("TEXT"===$.value)Z.debug("TEXT {"),i=T(),Z.debug("}");else if("DIMENSION"===$.value)Z.debug("DIMENSION {"),i=L(),Z.debug("}");else if("INSERT"===$.value)Z.debug("INSERT {"),i=x(),Z.debug("}");else if("HATCH"===$.value)Z.debug("HATCH {"),i=g(),Z.debug("}");else if("SOLID"===$.value)Z.debug("SOLID {"),i=I(),Z.debug("}");else if("POINT"===$.value)Z.debug("POINT {"),i=A(),Z.debug("}");else if("MTEXT"===$.value)Z.debug("MTEXT {"),i=U(),Z.debug("}");else{if("ATTDEF"!==$.value){Z.warn("Unhandled entity "+$.value),$=k.next();continue}Z.debug("ATTDEF {"),i=K(),Z.debug("}")}p(i),n.push(i)}else $=k.next();return"ENDSEC"==t&&($=k.next()),n},m=function(S){switch($.code){case 0:S.type=$.value,$=k.next();break;case 5:S.handle=$.value,$=k.next();break;case 6:S.lineType=$.value,$=k.next();break;case 8:S.layer=$.value,$=k.next();break;case 48:S.lineTypeScale=$.value,$=k.next();break;case 60:S.visible=0===$.value,$=k.next();break;case 62:S.colorIndex=$.value,S.color=H(Math.abs($.value)),$=k.next();break;case 67:S.inPaperSpace=0!==$.value,$=k.next();break;case 210:S.extrusionDirection=a();break;case 330:S.ownerHandle=$.value,$=k.next();break;case 347:S.materialObjectHandle=$.value,$=k.next();break;case 370:S.lineweight=$.value,$=k.next();break;case 420:S.color=$.value,$=k.next();break;case 100:if("AcDbEntity"==$.value){$=k.next();break}default:i($),$=k.next()}},B=function(){var w={type:$.value};for($=k.next();"EOF"!==$&&0!==$.code;)switch($.code){case 10:w.x=$.value,$=k.next();break;case 20:w.y=$.value,$=k.next();break;case 30:w.z=$.value,$=k.next();break;case 40:case 41:case 42:$=k.next();break;case 70:w.curveFittingVertex=0!==(1|$.value),w.curveFitTangent=0!==(2|$.value),w.splineVertex=0!==(8|$.value),w.splineControlPoint=0!==(16|$.value),w.ThreeDPolylineVertex=0!==(32|$.value),w.ThreeDPolylineMesh=0!==(64|$.value),w.polyfaceMeshVertex=0!==(128|$.value),$=k.next();break;case 50:case 71:case 72:case 73:case 74:$=k.next();break;default:m(w)}return w},V=function(){var b={type:$.value};for($=k.next();"EOF"!=$&&0!=$.code;)m(b);return b},a=function(){var P={},w=$.code;if(P.x=$.value,w+=10,$=k.next(),$.code!=w)throw new Error("Expected code for point value to be "+w+" but got "+$.code+".");return P.y=$.value,w+=10,$=k.next(),$.code!=w?P:(P.z=$.value,$=k.next(),P)},r=function(){var O={},W=$.code;return O.x=$.value,W+=1,$=k.next(),$.code!=W?(k._pointer-=2,O.y=1):O.y=$.value,W+=1,$=k.next(),$.code!=W?(k._pointer-=2,O):(O.z=$.value,$=k.next(),O)},y=function(s){if(!s||0>=s)throw Error("n must be greater than 0 verticies");var q,Q=[],h=!1,S=!1;for(q=0;s>q;q++){for(var R={};"EOF"!==$&&0!==$.code&&!S;){switch($.code){case 10:if(h){S=!0;continue}R.x=$.value,h=!0;break;case 20:R.y=$.value;break;case 30:R.z=$.value;break;case 40:R.startWidth=$.value;break;case 41:R.endWidth=$.value;break;case 42:0!=$.value&&(R.bulge=$.value);break;default:$=k.next();continue}$=k.next()}Q.push(R),h=!1,S=!1}return Q},G=function(){for(var C=[];"EOF"!==$;)if(0===$.code)if("VERTEX"===$.value)C.push(B());else if("SEQEND"===$.value){V();break}return C},U=function(){var T={type:$.value};for($=k.next();"EOF"!==$&&0!==$.code;)switch($.code){case 1:T.text=$.value,$=k.next();break;case 3:T.text+=$.value,$=k.next();break;case 10:T.position=a();break;case 40:T.height=$.value,$=k.next();break;case 41:T.width=$.value,$=k.next();break;case 71:T.attachmentPoint=$.value,$=k.next();break;case 72:T.drawingDirection=$.value,$=k.next();break;case 50:T.angle=2*$.value*Math.PI/360,$=k.next();break;case 11:T.directionX=$.value,$=k.next();break;case 21:T.directionY=$.value,$=k.next();break;default:m(T)}return T},K=function(){var i={type:$.value,scale:1,textStyle:"STANDARD"};for($=k.next();"EOF"!==$&&0!==$.code;)switch($.code){case 1:i.text=$.value,$=k.next();break;case 2:i.tag=$.value,$=k.next();break;case 3:i.prompt=$.value,$=k.next();break;case 7:i.textStyle=$.value,$=k.next();break;case 10:i.x=$.value,$=k.next();break;case 20:i.y=$.value,$=k.next();break;case 30:i.z=$.value,$=k.next();break;case 39:i.thickness=$.value,$=k.next();break;case 40:i.textHeight=$.value,$=k.next();break;case 41:i.scale=$.value,$=k.next();break;case 50:i.rotation=$.value,$=k.next();break;case 51:i.obliqueAngle=$.value,$=k.next();break;case 70:i.invisible=!!(1&$.value),i.constant=!!(2&$.value),i.verificationRequired=!!(4&$.value),i.preset=!!(8&$.value),$=k.next();break;case 71:i.backwards=!!(2&$.value),i.mirrored=!!(4&$.value),$=k.next();break;case 72:i.horizontalJustification=$.value,$=k.next();break;case 73:i.fieldLength=$.value,$=k.next();break;case 74:i.verticalJustification=$.value,$=k.next();break;case 100:$=k.next();break;case 210:i.extrusionDirectionX=$.value,$=k.next();break;case 220:i.extrusionDirectionY=$.value,$=k.next();break;case 230:i.extrusionDirectionZ=$.value,$=k.next();break;default:m(i)}return i},N=function(){var v={type:$.value,vertices:[]},O=0;for($=k.next();"EOF"!==$&&0!==$.code;)switch($.code){case 38:v.elevation=$.value,$=k.next();break;case 39:v.depth=$.value,$=k.next();break;case 70:v.shape=1===$.value,$=k.next();break;case 90:O=$.value,$=k.next();break;case 10:v.vertices=y(O);break;case 43:0!==$.value&&(v.width=$.value),$=k.next();break;default:m(v)}return v},l=function(){var p={type:$.value,vertices:[]};for($=k.next();"EOF"!==$&&0!==$.code;)switch($.code){case 10:case 20:case 30:case 39:case 40:case 41:$=k.next();break;case 70:p.shape=0!==(1|$.value),$=k.next();break;case 71:case 72:case 73:case 74:case 75:$=k.next();break;case 210:Z.debug($.value),$=k.next();break;case 220:case 230:$=k.next();break;case 100:$=k.next();break;default:m(p)}return p.vertices=G(),p},M=function(){var x={type:$.value,vertices:[]};for($=k.next();"EOF"!==$&&0!==$.code;)switch($.code){case 10:x.vertices.unshift(a());break;case 11:x.vertices.push(a());break;case 100:if("AcDbLine"==$.value){$=k.next();break}default:m(x)}return x},q=function(){var t,b;for(t={type:$.value},$=k.next();"EOF"!==$&&0!==$.code;)switch($.code){case 10:t.center=a();break;case 40:t.radius=$.value,$=k.next();break;case 50:t.startAngle=Math.PI/180*$.value,$=k.next();break;case 51:b=Math.PI/180*$.value,t.angleLength=b<t.startAngle?b+2*Math.PI-t.startAngle:b-t.startAngle,t.endAngle=b,$=k.next();break;default:m(t)}return t},s=function(){var t,g;for(t={type:$.value},$=k.next();"EOF"!==$&&0!==$.code;)switch($.code){case 10:t.center=a();break;case 11:t.major=a();break;case 40:t.ratio=$.value,$=k.next();break;case 41:t.startAngle=$.value,$=k.next();break;case 42:g=$.value,t.angleLength=g<t.startAngle?g+2*Math.PI-t.startAngle:g-t.startAngle,t.endAngle=g,$=k.next();break;default:m(t)}return t},x=function(){var N;for(N={type:$.value},$=k.next();"EOF"!==$&&0!==$.code;)switch($.code){case 2:N.block=$.value,$=k.next();break;case 10:N.center=a();break;case 41:N.scale=r();break;case 50:N.deg=$.value,$=k.next();break;default:m(N)}return N},g=function(){var d;for(d={type:$.value},$=k.next();"EOF"!==$&&0!==$.code;)switch($.code){case 2:d.block=$.value,$=k.next();break;case 10:d.center=a();break;case 41:d.scale=r();break;case 50:d.deg=$.value,$=k.next();break;default:m(d)}return d},u=function(){var E,o;for(E={type:$.value},$=k.next();"EOF"!==$&&0!==$.code;)switch($.code){case 10:E.center=a();break;case 11:E.major=a();break;case 40:E.ratio=$.value,$=k.next();break;case 41:E.startAngle=$.value,$=k.next();break;case 42:o=$.value,E.angleLength=o<E.startAngle?o+2*Math.PI-E.startAngle:o-E.startAngle,E.endAngle=o,$=k.next();break;default:m(E)}return E},T=function(){var U;for(U={type:$.value},$=k.next();"EOF"!==$&&0!==$.code;)switch($.code){case 10:U.startPoint=a();break;case 11:U.endPoint=a();break;case 40:U.textHeight=$.value,$=k.next();break;case 41:U.xScale=$.value,$=k.next();break;case 1:U.text=$.value,$=k.next();break;case 71:U.generationFlags=$.value,$=k.next();break;case 72:U.halign=$.value,$=k.next();break;case 73:U.valign=$.value,$=k.next();break;case 50:U.rotation=2*$.value*Math.PI/360,$=k.next();break;default:m(U)}return U},L=function(){var r;for(r={type:$.value},$=k.next();"EOF"!==$&&0!==$.code;)switch($.code){case 2:r.block=$.value,$=k.next();break;case 10:r.anchorPoint=a();break;case 11:r.middleOfText=a();break;case 71:r.attachmentPoint=$.value,$=k.next();break;case 42:r.actualMeasurement=$.value,$=k.next();break;case 1:r.text=$.value,$=k.next();break;case 50:r.angle=$.value,$=k.next();break;default:m(r)}return r},I=function(){var j;for(j={type:$.value},j.points=[],$=k.next();"EOF"!==$&&0!==$.code;)switch($.code){case 10:j.points[0]=a();break;case 11:j.points[1]=a();break;case 12:j.points[2]=a();break;case 13:j.points[3]=a();break;default:m(j)}return j},A=function(){var U;for(U={type:$.value},$=k.next();"EOF"!==$&&0!==$.code;)switch($.code){case 10:U.position=a();break;case 39:U.thickness=$.value,$=k.next();break;case 100:if("AcDbPoint"==$.value){$=k.next();break}default:m(U)}return U},p=function(L){if(!L)throw new TypeError("entity cannot be undefined or null");L.handle||(L.handle=O++)};return Y(),f},A.exports=X},{"./AutoCadColorIndex":1,"./DxfArrayScanner.js":2,loglevel:4}],4:[function(J,Y){!function(D,B){"object"==typeof Y&&Y.exports&&"function"==typeof J?Y.exports=B():"function"==typeof q&&"object"==typeof q.amd?q(B):D.log=B()}(this,function(){function X(l){return typeof console===m?!1:console[l]!==P?C(console,l):console.log!==P?C(console,"log"):a}function C(f,A){var B=f[A];if("function"==typeof B.bind)return B.bind(f);try{return Function.prototype.bind.call(B,f)}catch(q){return function(){return Function.prototype.apply.apply(B,[f,arguments])}}}function t(C,D){return function(){typeof console!==m&&(H(D),Q[C].apply(Q,arguments))}}function H(k){for(var C=0;C<s.length;C++){var K=s[C];Q[K]=k>C?a:Q.methodFactory(K,k)}}function b(R){var A=(s[R]||"silent").toUpperCase();try{return y.localStorage.loglevel=A,void 0}catch(b){}try{y.document.cookie="loglevel="+A+";"}catch(b){}}function E(){var D;try{D=y.localStorage.loglevel}catch(L){}if(typeof D===m)try{D=/loglevel=([^;]+)/.exec(y.document.cookie)[1]}catch(L){}Q.levels[D]===P&&(D="WARN"),Q.setLevel(Q.levels[D],!1)}var Q={},a=function(){},m="undefined",s=["trace","debug","info","warn","error"];Q.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},Q.methodFactory=function(M,S){return X(M)||t(M,S)},Q.setLevel=function(g,v){if("string"==typeof g&&Q.levels[g.toUpperCase()]!==P&&(g=Q.levels[g.toUpperCase()]),!("number"==typeof g&&g>=0&&g<=Q.levels.SILENT))throw"log.setLevel() called with invalid level: "+g;return v!==!1&&b(g),H(g),typeof console===m&&g<Q.levels.SILENT?"No console available for logging":void 0},Q.enableAll=function(m){Q.setLevel(Q.levels.TRACE,m)},Q.disableAll=function(n){Q.setLevel(Q.levels.SILENT,n)};var z=typeof y!==m?y.log:P;return Q.noConflict=function(){return typeof y!==m&&y.log===Q&&(y.log=z),Q},E(),Q})},{}]},{},[3])(3)});var D=x.DxfViewer=function(T,o){var z=this;z._gv=T,z.$17w={},z.$16w(o)};D.prototype={},D.prototype.constructor=D;var q={LINE:["LINE","POLYLINE","LWPOLYLINE"],CIRCLE:["CIRCLE","ARC"],ELLIPSE:["ELLIPSE"],TEXT:["TEXT","MTEXT"],SOLID:["SOLID"],POINT:["POINT"]};e.defineProperties(D.prototype,{gv:{get:function(){return this._gv}},dxf:{get:function(){return this._dxf}},forceUpdate:{get:function(){return this.$1ew},set:function(Y){var O=this;O.$1ew=Y,O.$18w&&(clearTimeout(O.$18w),O.$18w=P),Y&&O.gv&&O.gv.redraw()}},viewport:{get:function(){var b=this;if(b._dxf){var d=b.options;return{x:d.x===P?b.$19w.x:d.x,y:d.y===P?b.$19w.y:d.y}}},set:function(f){var x=this;x.options.x=f.x||0,x.options.y=f.y||0,x.forceUpdate=!0}},zoom:{get:function(){var V=this;return V._gv?V._gv.getZoom():V.options.zoom},set:function(h){var Q=this;Q._gv?Q._gv.setZoom(h):Q.options.zoom=h}}}),D.prototype.$16w=function(r){var V=this,G=V.options={};r=r||{},G.zoom=r.zoom||1,r.zoom&&V._gv&&r.zoom!==V._gv.getZoom()&&V._gv.setZoom(G.zoom),G.baseCacheUpdateInterval=r.baseCacheUpdateInterval||0,G.extraCacheUpdateInterval=r.extraCacheUpdateInterval||500,G.lineWidth=r.lineWidth||1,G.linesBatchSize=r.linesBatchSize||1e5,G.font=r.font||"Courier",G.pointCircleSize=r.pointCircleSize||5,G.pointCenterSize=r.pointCenterSize||2,G.textMinFontSize=r.textMinFontSize||3,G.textScaleRatio=r.textScaleRatio||1},D.prototype.draw=function(q){var Y=this;Y._dxf&&Y.$5w()&&(Y._now=Date.now(),Y._resolution=y.devicePixelRatio,Y.$64w(),Y.$6w(),Y.$13w(q),Y.$1ew=!1)},D.prototype.$64w=function(){var G=this,H=G.gv,l=H.getZoom(),e=H.tx(),_=H.ty(),g=G.$17w,S=G.options.extraCacheUpdateInterval;l!==g.zoom||e!==g.tx||_!==g.ty?(g.zoom=l,g.tx=e,g.ty=_,g.dirty=!0,g.dirtyTime=G._now,G.$18w&&clearTimeout(G.$18w),0===S?G.forceUpdate=!0:G.$18w=setTimeout(function(){G.forceUpdate=!0},G.options.extraCacheUpdateInterval)):g.dirty=!1},D.prototype.$13w=function(R){var N=this;N.options,N.$17w;var d;d=N.$1aw;var Z=d.zoom;R.drawImage(N.$15w,-d.tx/Z,-d.ty/Z,d.width/Z,d.height/Z),N.$18w||(d=N.$1fw,R.drawImage(N.$1cw,-d.tx/Z,-d.ty/Z,d.width/Z,d.height/Z))},D.prototype.$12w=function(d){var _,W,I,T,n,X,Z,m,V,Q,i,f,S,l,o,r,x,A,K=this,P=K._models;for(d.lineWidth=K.options.lineWidth,f=K.options.linesBatchSize,_=q.LINE,T=0,n=_.length;n>T;T++){W=_[T],I=P[W];for(m in I){for(d.strokeStyle=m,V=I[m],d.beginPath(),i=0,X=0,Z=V.length;Z>X;X++)if(Q=V[X],(i++>=f||Q.width)&&(d.stroke(),d.beginPath(),i=0),S=Q.vertices,S&&S.length){for(x=K.$3w(S[0].x,1),A=K.$3w(S[0].y,2),d.moveTo(x,A),o=1,r=S.length;r>o;o++)l=S[o],d.lineTo(K.$3w(l.x,1),K.$3w(l.y,2));Q.shape&&d.lineTo(x,A),Q.width&&(d.lineWidth=Math.max(1,K.$3w(Q.width)),d.stroke(),d.beginPath(),d.lineWidth=1)}d.stroke()}}},D.prototype.$11w=function(B){var h,i,s,Y,F,Q,x,_,Z,N,j,O,e,T=this,o=T._models;for(B.lineWidth=T.options.lineWidth,O=T.options.linesBatchSize,h=q.SOLID,Y=0,F=h.length;F>Y;Y++){i=h[Y],s=o[i];for(_ in s){for(B.fillStyle=_,Z=s[_],B.beginPath(),j=0,Q=0,x=Z.length;x>Q;Q++)N=Z[Q],j++>=O&&(B.fill(),B.beginPath(),j=0),e=N.points,B.moveTo(T.$3w(e[0].x,1),T.$3w(e[0].y,2)),B.lineTo(T.$3w(e[1].x,1),T.$3w(e[1].y,2)),B.lineTo(T.$3w(e[3].x,1),T.$3w(e[3].y,2)),B.lineTo(T.$3w(e[2].x,1),T.$3w(e[2].y,2)),B.lineTo(T.$3w(e[0].x,1),T.$3w(e[0].y,2));B.fill()}}},D.prototype.$10w=function(X){var Q,b,y,E,o,p,T,I,B,G,M,Z,O,D,l=this,W=l._models;for(X.lineWidth=l.options.lineWidth,Q=q.POINT,O=l.$3w(l.options.pointCircleSize),D=l.$3w(l.options.pointCenterSize),E=0,o=Q.length;o>E;E++){b=Q[E],y=W[b];for(I in y)for(X.strokeStyle=I,X.fillStyle=I,B=y[I],p=0,T=B.length;T>p;p++)G=B[p],M=l.$3w(G.position.x,1),Z=l.$3w(G.position.y,2),X.fillRect(M,Z,D,D),X.beginPath(),X.arc(M,Z,O,0,2*Math.PI,!0),X.stroke()}},D.prototype.$9w=function(W){var k,o,c,U,V,g,w,u,X,t,T,p,i,F,Z,Y,J,n,E,m,M=this,H=M._models;for(W.lineWidth=M.options.lineWidth,k=q.CIRCLE,U=0,V=k.length;V>U;U++){o=k[U],c=H[o];for(u in c)for(W.strokeStyle=u,X=c[u],g=0,w=X.length;w>g;g++)t=X[g],W.beginPath(),T=t.startAngle||0,p=t.angleLength||2*Math.PI,i=T+p,F=t.radius,Z=t.addonAngle||0,Y=M.$3w(t.center.x,1),J=M.$3w(t.center.y,2),m=t.xInvert^(t.extrusionDirection&&-1===t.extrusionDirection.z),E=t.yInvert,E||m?m&&E?(T=Math.PI+T,i=Math.PI+i,n=!1):(T=Math.PI*(m?1:2)-T,i=Math.PI*(m?1:2)-i,n=!0):n=!1,W.arc(Y,J,M.$3w(F),T+Z,i+Z,n),W.stroke()}},D.prototype.$8w=function(v){var z,C,F,P,o,s,p,c,l,X,T,b,u,w,L,d,R,a,K,y,M,D,N,m,n,h=this,Z=h._models;for(z=q.TEXT,L=h.options.font,N=h.options.textScaleRatio,m=h.options.textMinFontSize,P=0,o=z.length;o>P;P++){C=z[P],F=Z[C];for(c in F)for(v.fillStyle=c,l=F[c],s=0,p=l.length;p>s;s++)if(X=l[s],T=X.text,"MTEXT"===C?(b=h.$3w(X.height||12),u=h.$3w(X.position.x,1),w=h.$3w(X.position.y,2),K=X.angle?X.angle:X.directionX?Math.atan2(X.directionY,X.directionX):0,K+=X.addonAngle||0,D=1,a=X.attachmentPoint||1,d=a%3,R=Math.floor(a/3)):(b=h.$3w(X.textHeight||12),u=X.startPoint.x,w=X.startPoint.y,K=X.rotation||0,D=X.xScale||1,2===X.generationFlags?K=2*Math.PI-K:4===X.generationFlags?K=Math.PI-K:6===X.generationFlags&&(K=Math.PI+K),u=h.$3w(u,1),w=h.$3w(w,2),d=(X.halign||0)+1,3===X.valign?R=0:2===X.valign?(R=1,X.endPoint&&(u=(u+h.$3w(X.endPoint.x,1))/2)):R=2),!(m>b)){if(h._isAc2015&&(w-=b),v.save(),v.translate(u,w),v.rotate(K),v.scale(D,-1),"MTEXT"===C&&(1===R?v.translate(0,b/2):0===R&&v.translate(0,b)),v.textAlign=0===d?"right":2===d?"center":"left",v.font=b*N+"px "+L,"MTEXT"===C)for(T=T.replace(/\\{/g,"#@#"),T=T.replace(/\\}/g,"#@@"),T=T.replace(/({|})/g,""),T=T.replace(/#@#/g,"{"),T=T.replace(/#@@/g,"}"),T=T.replace(/\\[ACT]\d+;/g,""),(n=T.match(/\\f[^;]*;/))&&(T=T.replace(n[0],""),n=n[0].match(/\|p(\d+)/),n&&(v.font=n[0]/10*b*N+"px "+L)),y=T.split("\\P"),M=0;M<y.length;M++)v.fillText(y[M],0,1.2*M*b);else v.fillText(T,0,0);v.restore()}}},D.prototype.$7w=function(c){var b,S,T,f,k,X,P,K,_,u,G,N,L,e,A,t,p,O,x,Z,V,I=this,a=I._models;for(b=q.ELLIPSE,f=0,k=b.length;k>f;f++){S=b[f],T=a[S];for(K in T)for(c.strokeStyle=K,_=T[K],X=0,P=_.length;P>X;X++)u=_[X],G=u.major,N=Math.atan2(G.y,G.x),L=Math.sqrt(G.x*G.x+G.y*G.y),e=u.startAngle||0,A=u.angleLength||2*Math.PI,t=e+A,p=I.$3w(u.center.x,1),O=I.$3w(u.center.y,2),x=u.xInvert,Z=u.yInvert^(u.extrusionDirection&&-1===u.extrusionDirection.z),Z||x?x&&Z?(e=Math.PI+e,t=Math.PI+t,V=!1):(e=Math.PI*(x?1:2)-e,t=Math.PI*(x?1:2)-t,V=!0):V=!1,c.lineWidth=I.options.lineWidth,c.save(),c.translate(p,O),c.scale(u.ratio,1),c.rotate(N),c.beginPath(),c.arc(0,0,I.$3w(L),e,t,V),c.strokeStyle=K,c.restore(),c.stroke()}},D.prototype.$6w=function(){var S,L,M,o,k,F,$,O,w=this,J=w.$17w,v=w._resolution;if(F=w.viewport,$=-F.x,O=-F.y,w._shiftX=w.viewport.x,w._shiftY=w.viewport.y,w._zoom=J.zoom,w.forceUpdate||w._now-(w._baseCacheUpdateTime||0)>w.options.baseCacheUpdateInterval){var E=w.$1bw,P=w.$15w;o=P.width,k=P.height,E.clearRect(0,0,o,k),w.$1aw={tx:S=J.tx,ty:L=J.ty,zoom:M=J.zoom,width:o/v,height:k/v},E.save(),E.setTransform(v,0,0,-v,v*S,v*L),w.$12w(E),w._baseCacheUpdateTime=w._now,E.restore()}if(w.forceUpdate){var Z=w.$1dw,b=w.$1cw;o=b.width,k=b.height,Z.clearRect(0,0,o,k),w.$1fw={tx:S=J.tx,ty:L=J.ty,zoom:M=J.zoom,width:o/v,height:k/v},Z.save(),Z.setTransform(v,0,0,-v,v*S,v*L),w.$10w(Z),w.$9w(Z),w.$11w(Z),w.$7w(Z),w.$8w(Z),Z.restore()}},D.prototype.$5w=function(){var g=this,$=g._gv.getCanvas();if(!$)return!1;var e,i=g.$15w;return i?e=g.$1cw:(i=g.$15w=document.createElement("canvas"),g.$1bw=i.getContext("2d"),e=g.$1cw=document.createElement("canvas"),g.$1dw=e.getContext("2d")),(i.style.width!==$.style.width||i.style.height!==$.style.height||i.width!==$.width||i.height!==$.height)&&(i.style.width=e.style.width=$.style.width,i.style.height=e.style.height=$.style.height,i.width=e.width=$.width,i.height=e.height=$.height,g.$1ew=!0),!0},D.prototype.$4w=function(D,n,P,J){var m=this,s=m.$2w(n,P);if(s){var I,o,O,g=n.type;if("DIMENSION"!==g&&"INSERT"!==g){(I=D[g])||(I=D[g]={}),(o=I[s])||(o=I[s]=[]);var x=n.extrusionDirection&&-1===n.extrusionDirection.z&&["POINT","LINE","POLYLINE","LWPOLYLINE","ELLIPSE"].indexOf(g)<0;if(J||x){J||(J={a:1,b:0,c:0,d:1,tx:0,ty:0});var v={};for(var f in n)v[f]=n[f];v.radius&&(v.radius*=Math.sqrt(J.a*J.a+J.b*J.b)),v.textHeight&&(v.textHeight*=Math.sqrt(J.a*J.a+J.b*J.b));var d=x?-1:1,a=function(l,U){if(l){var s=l.x,v=l.y;return{x:s*d*U.a+v*U.c+U.tx,y:s*d*U.b+v*U.d+U.ty}}};if(v.position=a(v.position,J),v.startPoint=a(v.startPoint,J),v.center=a(v.center,J),"ELLIPSE"===g){var Q;Q=a({x:n.major.x+n.center.x,y:n.major.y+n.center.y},J),v.major={x:Q.x-v.center.x,y:Q.y-v.center.y},n.extrusionDirection&&-1===n.extrusionDirection.z&&(v.major.x*=-1)}var _;v.vertices&&(_=[],v.vertices.forEach(function(N){_.push(a(N,J))}),v.vertices=_),v.points&&(_=[],v.points.forEach(function(X){_.push(a(X,J))}),v.points=_);var c=Math.atan2(J.b,J.a),k=Math.cos(c);v.yInvert=J.d*k<0,v.xInvert=J.a*k<0,0!==c&&(v.addonAngle=c),o.push(v)}else o.push(n)}else{if(!n.block)return;var y=P.blocks[n.block];if(!y||!y.entities)return;var B=J;if("INSERT"===g){var U=n.scale?n.scale.x:1,u=n.scale?n.scale.y:1,G=0,H=1,A=0;if(n.deg&&(G=n.deg*Math.PI/180,H=Math.cos(G),A=Math.sin(G)),J){var e=U*H,t=U*A,N=-u*A,C=u*H,w=n.center.x,q=n.center.y;B={a:J.a*e+J.c*t,b:J.b*e+J.d*t,c:J.a*N+J.c*C,d:J.b*N+J.d*C,tx:J.a*w+J.c*q+J.tx,ty:J.b*w+J.d*q+J.ty}}else B={a:U*H,b:U*A,c:-u*A,d:u*H,tx:n.center.x,ty:n.center.y}}for(O=0;O<y.entities.length;O++)m.$4w(D,y.entities[O],P,B)}}},D.prototype.parseFile=function(I){var q=this,t=new DxfParser,E=t.parseSync(I);q._dxf=E,q.$19w=q.$1w(E),q._isAc2015="AC1015"===E.header.$ACADVER;var x=q.gv?q.gv.getWidth():1e3,P=q.gv?q.gv.getZoom():1;q._dxfSelfZoom=x/q.$19w.width/P,q.$19w.x-=q.$19w.width/2,q.$19w.y+=q.$19w.height/2;var X,T,d,h=q._models={};for(X=0,T=E.entities.length;T>X;X++)d=E.entities[X],q.$4w(h,d,E);console.log("parse finished"),q.forceUpdate=!0},D.prototype.$3w=function(N,I){var F=1===I?this._shiftX:2===I?this._shiftY:0,i=this._zoom*this._dxfSelfZoom;return(N-F)*i},D.prototype.$2w=function(b,Y){var j;if(Y.tables&&Y.tables.layer&&(j=Y.tables.layer.layers[b.layer]),!j||j.visible){var K;return b.color!==P?(K=b.color,0===K&&(K=16777215)):j&&(K=j.color),K||(K=16777215),"#"+((1<<24)+K).toString(16).slice(1)}},D.prototype.$1w=function(l){var D,X,d,x,m,G,Y,U,g,R,o,z,F=0;
if(!D&&l.tables&&l.tables.viewPort){R=l.tables.viewPort.viewPorts;for(g in R)if(o=R[g],z=o.viewDirectionFromTarget,o.center&&(o.renderMode===F||z&&0===z.x&&0===z.y&&1===z.z)){d=o.center,x=o.upperRightCorner,m=o.lowerLeftCorner,D={x:x.x,y:x.y},X={x:m.x,y:m.y},G=o.viewWidth||0,Y=o.viewHeight||0,o.viewTarget&&(d={x:d.x+o.viewTarget.x,y:d.y+o.viewTarget.y});break}}return!D&&l.header&&(U=l.header,U.$EXTMIN&&U.$EXTMAX&&(D=U.$EXTMAX,X=U.$EXTMIN)),G=Math.max(G,D.x-X.x),Y=Math.max(Y,D.y-X.y),d=d||{x:G/2+X.x,y:Y/2+X.y},{width:G,height:Y,x:d.x,y:d.y}};var U=x.VirtualCanvas=function(p){this.view=p};U.prototype={},U.prototype.constructor=U,U.prototype.getCanvas=function(){return this.view._canvas},U.prototype.redraw=function(){var L=this.view;L.redraw(),L.validateImpl()},U.prototype.getView=function(){return this.view};var z=x.Context2dProxy=function(n,W){var M=this;M.ctx=n,M.writer=W,M._currentContext={a:1,b:0,c:0,d:1,tx:0,ty:0},M.$3fw(),M._contextStack=[],M._textScale=.8,M._forceSplitEllipse=!0,M._ellipseSegments=32,M._styleToColorCache={};for(var P in CanvasRenderingContext2D.prototype)if("webkitImageSmoothingEnabled"!==P){var $=n[P];if("function"==typeof $)M[P]=function(i,$){return function(){var G=$.apply(n,arguments);return M.$20w(i,arguments),G}}(P,$);else{var d=e.getOwnPropertyDescriptor(CanvasRenderingContext2D.prototype,P);if(!d.get&&!d.set)continue;!function(F){e.defineProperty(M,F,{get:function(){return n[F]},set:function(W){n[F]=W,M.$21w(F,W)}})}(P)}}};z.prototype={},z.prototype.constructor=z,z.prototype.$20w=function(s,W){var M=this;switch(s){case"save":M.$22w();break;case"restore":M.$23w();break;case"translate":M.$24w.apply(M,W);break;case"rotate":M.$26w.apply(M,W);break;case"scale":M.$25w.apply(M,W);break;case"setTransform":M.$27w.apply(M,W);break;case"transform":M.$28w.apply(M,W);break;case"fillText":case"strokeText":M.$30w(W[0],W[1],W[2],"fillText"===s);break;case"rect":M.$31w.apply(M,W);break;case"fill":M.$32w();break;case"stroke":M.$3ew();break;case"moveTo":M.$34w(W[0],W[1]);break;case"lineTo":M.$35w(W[0],W[1]);break;case"beginPath":M.$39w();break;case"closePath":M.$3aw();break;case"arc":M.$36w.apply(M,W);break;case"ellipse":M.$37w.apply(M,W);break;case"quadraticCurveTo":M.$38w([{x:W[0],y:W[1]}],W[2],W[3]);break;case"bezierCurveTo":M.$38w([{x:W[0],y:W[1]},{x:W[2],y:W[3]}],W[4],W[5])}},z.prototype.$21w=function(){},z.prototype.$22w=function(){var U=this,B={},v=U._currentContext;for(var f in v)B[f]=v[f];U._contextStack.push(B)},z.prototype.$23w=function(){var W=this;W._currentContext=W._contextStack.pop(),W.$29w()},z.prototype.$24w=function(R,l){if(0!==R||0!==l){var x=this,K=x._currentContext,f=K.a,i=K.b,X=K.c,w=K.d;K.tx=f*R+X*l+K.tx,K.ty=i*R+w*l+K.ty,x.$29w()}},z.prototype.$25w=function(F,Q){if(1!==F||1!==Q){var k=this,E=k._currentContext;E.a*=F,E.b*=F,E.c*=Q,E.d*=Q,k.$29w()}},z.prototype.$26w=function(S){var Q=Math.cos(S),P=Math.sin(S),y=this,e=y._currentContext,v=e.a,o=e.b,V=e.c,$=e.d;e.a=v*Q+V*P,e.b=o*Q+$*P,e.c=-v*P+V*Q,e.d=-o*P+$*Q,y.$29w()},z.prototype.$27w=function(l,Q,i,g,Z,s){var d=this,j=d._currentContext;j.a=l,j.b=Q,j.c=i,j.d=g,j.tx=Z,j.ty=s,d.$29w()},z.prototype.$28w=function(K,C,g,U,X,H){var M=this,b=M._currentContext,Y=b.a,q=b.b,i=b.c,z=b.d;b.a=Y*K+i*C,b.b=q*K+z*C,b.c=Y*g+i*U,b.d=q*g+z*U,b.tx=Y*X+i*H+b.tx,b.ty=q*X+z*H+b.ty,M.$29w()},z.prototype.$29w=function(){var C=this;C.writer.$40w(C._currentContext)},z.prototype.$2aw=function(){var t=this._currentContext;return 0===t.b&&0===t.c?0:Math.atan2(t.b,t.a)},z.prototype.$2bw=function(){var j=this._currentContext;return{x:Math.sqrt(j.a*j.a+j.c*j.c),y:Math.sqrt(j.b*j.b+j.d*j.d)}},z.prototype.$2cw=function(B){var c=this._currentContext,r=B.x,w=B.y;return{x:c.a*r+c.c*w+c.tx,y:c.b*r+c.d*w+c.ty}},z.prototype.$2dw=function(p){for(var Q=this,j=new Array(p.length),z=0,m=p.length;m>z;z++)j[z]=Q.$2cw(p[z]);return j},z.prototype.$2ew=function(w){var l=this._currentContext;return w*Math.sqrt(l.a*l.a+l.b*l.b)},z.prototype._equal=function(g,P){var s=g-P;return s>-1e-5&&1e-5>s},z.cadColorConst=[0,16711680,16776960,65280,65535,255,16711935,16777215,8421504,12632256,16711680,16744319,13369344,13395558,10027008,10046540,8323072,8339263,4980736,4990502,16727808,16752511,13382400,13401958,10036736,10051404,8331008,8343359,4985600,4992806,16744192,16760703,13395456,13408614,10046464,10056268,8339200,8347455,4990464,4995366,16760576,16768895,13408512,13415014,10056192,10061132,8347392,8351551,4995328,4997670,16776960,16777087,13421568,13421670,10000384,10000460,8355584,8355647,5000192,5000230,12582656,14679935,10079232,11717734,7510016,8755276,6258432,7307071,3755008,4344870,8388352,12582783,6736896,10079334,5019648,7510092,4161280,6258495,2509824,3755046,4194048,10485631,3394560,8375398,2529280,6264908,2064128,5209919,1264640,3099686,65280,8388479,52224,6736998,38912,5019724,32512,4161343,19456,2509862,65343,8388511,52275,6737023,38950,5019743,32543,4161359,19475,2509871,65407,8388543,52326,6737049,38988,5019762,32575,4161375,19494,2509881,65471,8388575,52377,6737074,39026,5019781,32607,4161391,19513,2509890,65535,8388607,52428,6737100,39064,5019800,32639,4161407,19532,2509900,49151,8380415,39372,6730444,29336,5014936,24447,4157311,14668,2507340,32767,8372223,26316,6724044,19608,5010072,16255,4153215,9804,2505036,16383,8364031,13260,6717388,9880,5005208,8063,4149119,4940,2502476,255,8355839,204,6710988,152,5000344,127,4145023,76,2500172,4129023,10452991,3342540,8349388,2490520,6245528,2031743,5193599,1245260,3089996,8323327,12550143,6684876,10053324,4980888,7490712,4128895,6242175,2490444,3745356,12517631,14647295,10027212,11691724,7471256,8735896,6226047,7290751,3735628,4335180,16711935,16744447,13369548,13395660,9961624,9981080,8323199,8339327,4980812,4990540,16711871,16744415,13369497,13395634,9961586,9981061,8323167,8339311,4980793,4990530,16711807,16744383,13369446,13395609,9961548,9981042,8323135,8339295,4980774,4990521,16711743,16744351,13369395,13395583,9961510,9981023,8323103,8339279,4980755,4990511,3355443,5987163,8684676,11382189,14079702,16777215],z.prototype.$2fw=function(V){var j=this,c=j._styleToColorCache[V];if(c!==P)return c;for(var i,q,N,m="string"==typeof V?parseInt("0x"+V.slice(1)):7,p=z.cadColorConst,o=1e4,$=0,t=p.length;t>$;$++)i=p[$],q=Math.abs((i>>16)-(m>>16))+Math.abs((255&i>>8)-(255&m>>8))+Math.abs((255&i)-(255&m)),o>q&&(o=q,N=$);return j._styleToColorCache[V]=N,N},z.prototype.$30w=function(_,h,R,k){var B,V,N=this,T=N.ctx,O=T.font,Y=k?T.fillStyle:T.strokeStyle,w=T.textAlign,m=T.textBaseline;V=T.measureText("e").width,h+=V/2,"left"!==w&&(B=T.measureText(_).width,"center"===w?h-=B/2:"right"===w&&(h-=B)),"middle"===m&&(R+=V/2);var o,M=8;"string"==typeof O&&(o=O.match(/^\d+/),o&&(M=o[0]));var z=N.$2aw(),K=N.$2fw(Y);_=(""+_).split("\n").join(","),N.writer.$49w(_,N.$2cw({x:h,y:R}),N.$2ew(N._textScale*M),z,K)},z.prototype.$31w=function(f,Y,D,$){var p=this,n=p.$2dw([{x:f,y:Y},{x:f+D,y:Y},{x:f+D,y:Y+$},{x:f,y:Y+$}]);p.$3bw(n[0]),p._path.push({type:"rect",points:n})},z.prototype.$32w=function(){var A,U=this,K=U._path;if(K.length){var F=K.length;"closePath"!==K[K.length-1].subType&&U.$3aw();var W,L,X,f=U.$2fw(U.ctx.fillStyle),R=!0;for(X=0;F>X;X++){if(W=K[X].type,"moveTo"!==W&&"rect"!==W){R=!1;break}if("rect"===W){if(L){R=!1;break}L=X}}R?(A=K[L],U.writer.$4aw(A.points,f)):(U._filling=!0,U._hatchContext={startId:U.writer.entities.length,color:f},U.$3ew(),U.$33w(),U._filling=P)}},z.prototype.$33w=function(){var z=this,s=z._hatchContext;if(s){var k=s.startId,E=z.writer.entities,X=E.length,B=X-k;if(B){var C;for(C=k;X>C;C++)E[C].invisible=!0;z.writer.$45w(B,s.color),s.startId=E.length}}},z.prototype.$34w=function(H,O){var r=this,M=r.$2cw({x:H,y:O});r._headPoint=M,r._path.push({type:"moveTo",x:M.x,y:M.y})},z.prototype.$35w=function(N,v){var K=this,t=K.$2cw({x:N,y:v});K._path.push({type:"lineTo",x:t.x,y:t.y})},z.prototype.$36w=function(y,e,p,O,X,E){this.$37w(y,e,p,p,0,O,X,E)},z.prototype.$37w=function(L,K,d,T,E,Q,y,j){var g,Y,f,H,b,S,q,D,B,n,c,A,l,J,O,t=this,R=t.$2bw(),P=t.$2cw({x:L,y:K});S=Math.sin(E),q=Math.cos(E);var G=function(u){var s=d*Math.cos(-u),O=T*Math.sin(-u);return t.$2cw({x:L+(q*s-S*O),y:K+(S*s+q*O)})},I=[],v=y;if(j)for(;v>=Q;)v-=2*Math.PI;else for(;Q>=v;)v+=2*Math.PI;for(n=(v-Q)/t._ellipseSegments,A=0;A<=t._ellipseSegments;A++)c=Q+n*A,l=G(-c),I.push(l);if(H=I[0],b=I[I.length-1],g=t.$3cw(Q,y,j),Q=g.start,y=g.end,t.$3bw(H),D=t._equal(R.x,R.y),B=t._equal(d,T),!t._forceSplitEllipse&&D&&B&&t._equal(Math.abs(Q-y),2*Math.PI))t._path.push({type:"circle",x:P.x,y:P.y,end:b,keyPoints:I,radius:d*R.x});else if(!t._forceSplitEllipse&&D&&B)Y=t.$2aw(),f=Math.cos(Y),J=t._currentContext.a*f<0,O=t._currentContext.d*f<0,g=t.$3dw(Q,y,J,O),Q=g.start-Y,y=g.end-Y,t._path.push({type:"arc",x:P.x,y:P.y,end:b,radius:d*R.x,startAngle:Q,endAngle:y,keyPoints:I});else{if(t._forceSplitEllipse||!D){for(A=1;A<=t._ellipseSegments;A++)l=I[A],t._path.push({type:"lineTo",x:l.x,y:l.y});return}var N,Z,U=G(0),C=G(Math.PI/2),_=function(w,F){var v=w.x-F.x,X=w.y-F.y;return Math.sqrt(v*v+X*X)},u=_(U,P),p=_(C,P);p>u?(Z=u,u=p,p=Z,N=C):N=U,Y=t.$2aw(),f=Math.cos(Y),J=t._currentContext.a*f<0,O=t._currentContext.d*f<0,g=t.$3dw(Q-Math.PI/2,y-Math.PI/2,J,O),Q=g.start,y=g.end,t._path.push({type:"ellipse",x:P.x,y:P.y,end:b,major:{x:N.x-P.x,y:N.y-P.y},ratio:p/u,startAngle:Q,endAngle:y,keyPoints:I})}},z.prototype.$38w=function(R,M,e){var H=this,j=H.$2cw({x:M,y:e});this._path.push({type:"bezier",x:j.x,y:j.y,ctrl:H.$2dw(R)})},z.prototype.$39w=function(){this.$3fw()},z.prototype.$3aw=function(){var u=this,n=u._headPoint;n&&(u._path.push({type:"lineTo",x:n.x,y:n.y,subType:"closePath"}),u._headPoint=null,u._lastPoint=null)},z.prototype.$3bw=function(j){var P=this;return P._headPoint?(P._path.push({type:"lineTo",x:j.x,y:j.y,subType:"connect"}),void 0):(P._headPoint=j,P._path.push({type:"moveTo",x:j.x,y:j.y}),void 0)},z.prototype.$3cw=function(Y,a,W){Y=-Y,a=-a;var j,T=Y%(2*Math.PI),M=a%(2*Math.PI);for(0>T&&(T+=2*Math.PI),0>M&&(M+=2*Math.PI),W||(j=T,T=M,M=j);T>=M;)M+=2*Math.PI;return{start:T,end:M}},z.prototype.$3dw=function(t,r,D,N){var g;return(N||D)&&(D&&N?(t=Math.PI+t,r=Math.PI+r):(g=Math.PI*(D?1:2)-r,r=Math.PI*(D?1:2)-t,t=g)),{start:t,end:r}},z.prototype.$3ew=function(){var A=this,K=A._path;if(K.length){var V,E,N,l,U,c,M=[],S=A.$2fw(A.ctx.strokeStyle),g=function(){M.length>1&&A.writer.$48w(M,S),M=[]};for(E=0,V=K.length;V>E;E++){if(N=K[E],A._filling&&["circle","arc","ellipse"].indexOf(N.type)>=0){if(c=N.keyPoints,!A._lastPoint)break;M.length||M.push(A._lastPoint),M=M.concat(c),A._lastPoint=N.end;break}switch(N.type){case"moveTo":g(),A._filling&&A.$33w(),A._lastPoint={x:N.x,y:N.y},M.push(A._lastPoint);break;case"lineTo":if(!A._lastPoint)break;M.length||M.push(A._lastPoint),M.push({x:N.x,y:N.y}),A._lastPoint={x:N.x,y:N.y};break;case"rect":g(),U=[].concat(N.points,N.points[0]),A.writer.$48w(U,S),A._lastPoint=N.points[0];break;case"circle":g(),A.writer.$43w(N.x,N.y,N.radius,S),A._lastPoint=N.end;break;case"arc":g(),A.writer.$44w(N.x,N.y,N.radius,N.startAngle,N.endAngle,S),A._lastPoint=N.end;break;case"ellipse":g(),A.writer.$46w(N.x,N.y,N.major,N.ratio,N.startAngle,N.endAngle,S),A._lastPoint=N.end;break;case"bezier":if(g(),l=A._lastPoint,!l)break;A.writer.$47w(l.x,l.y,N.x,N.y,N.ctrl,S),A._lastPoint={x:N.x,y:N.y};break;default:M.push({x:N.x,y:N.y})}}g()}},z.prototype.$3fw=function(){var q=this;q._path=[],q._lastPoint=null,q._headPoint=null};var J=x.DxfWriter=function(U){var c=this;c.version=U||"AC1027",c._lineContents=[],c._entityList=[]};J.prototype={},J.prototype.constructor=J,J.version="0.9.2",e.defineProperties(J.prototype,{entities:{get:function(){return this._entityList}}}),J.prototype.snapshotView=function(A){this.snapshotVCanvas(new U(A))},J.prototype.snapshotVCanvas=function(h){var C=this;C._lineContents=[],C._viewport={left:1/0,up:-1/0,right:-1/0,down:1/0},C._matrix={a:1,b:0,c:0,d:-1,tx:0,ty:0};var n=h.getCanvas(),v=h.getView()._42,E=n.getContext;n.getContext=function(H){return function(W){var $=H.apply(this,arguments);return"2d"===W&&($=C.$41w($)),$}}(n.getContext),h.getView()._42=function(U){return v.call(h.getView(),U)},h.redraw(),h.getView()._42=v,n.getContext=E},J.prototype.$40w=function(){},J.prototype.$41w=function(c){return new z(c,this)},J.prototype.write=function(){var P=this;return P.$4cw(),P.$56w(),P.$57w(),P.$59w(),P.$58w(),P.$67w(),P._lineContents.join("\n")},J.prototype.$42w=function(s,P,G,q){var _=this;_.$4bw("LINE",{p1:s=_.$2cw(s),p2:P=_.$2cw(P),color:G||7,layer:q||0}),_.$64w([s,P])},J.prototype.$43w=function(B,F,D,k){var W=this,f=W.$2ew(D),C=W.$2cw({x:B,y:F});W.$4bw("CIRCLE",{center:C,radius:f,color:k}),W.$64w([{x:C.x-f,y:C.y-f},{x:C.x+f,y:C.y+f}])},J.prototype.$44w=function(i,m,c,Z,a,s){var Y=this,c=Y.$2ew(c),e=Y.$2cw({x:i,y:m});Y.$4bw("ARC",{center:e,radius:c,color:s,startAngle:Z,endAngle:a}),Y.$64w([{x:e.x-c,y:e.y-c},{x:e.x+c,y:e.y+c}])},J.prototype.$45w=function(P,e){this.$4bw("HATCH",{color:e||7,edgeNum:P})},J.prototype.$46w=function(u,h,B,J,K,Y,w){var j=this,v=j.$2cw({x:u,y:h}),B=j.$2cw(B);j.$4bw("ELLIPSE",{center:v,majorAxis:B,axisRatio:J,color:w,startAngle:K,endAngle:Y}),j.$64w([{x:v.x-B.x,y:v.y-B.y},{x:v.x+B.x,y:v.y+B.y}])},J.prototype.$47w=function(A,G,D,c,s,H){var h=this,Q=h.$2cw({x:A,y:G}),Z=h.$2cw({x:D,y:c}),d=h.$2dw(s);h.$4bw("SPLINE",{source:Q,dest:Z,ctrl:d,color:H||7}),h.$64w([Q,Z]),h.$64w(s)},J.prototype.$48w=function(Z,c,U){var j=this;j.$4bw("LWPOLYLINE",{points:Z=j.$2dw(Z),color:c||7,layer:U||0}),j.$64w(Z)},J.prototype.$49w=function(c,_,H,j,l){var g=this;g.$4bw("TEXT",{text:c,pos:_=g.$2cw(_),size:g.$2ew(H),degree:g.$8bw(j||0),color:l||7}),g.$64w([_])},J.prototype.$4aw=function(l,j){var G=this,f=[l[0],l[1],l[3],l[2]];G.$4bw("SOLID",{points:f=G.$2dw(f),color:j||7}),G.$64w(f)},J.prototype.$4bw=function(V,Z){Z.type=V,this._entityList.push(Z)},J.prototype.$4cw=function(){var K=this;K.$76w("HT Dxf Writer. Version: "+J.version),K.$72w(),K.$7aw(9,"$ACADVER"),K.$7aw(1,K.version),K.$7aw(9,"$INSBASE"),K.$79w(10,0),K.$79w(20,0),K.$79w(30,0),K.$7aw(9,"$EXTMIN"),K.$79w(10,0),K.$79w(20,0),K.$79w(30,0),K.$7aw(9,"$EXTMAX"),K.$79w(10,1e3),K.$79w(20,1e3),K.$79w(30,0),K.$7aw(9,"$HANDSEED"),K._dxfHandleValue=672,K.$6dw(),K.$74w()},J.prototype.$4dw=function(){var f=this,O=f._viewport;f.$75w("VPORT",8,1),f.$7aw(0,"VPORT"),f.$77w(5,94),f.$77w(330,8),f.$7aw(100,"AcDbSymbolTableRecord"),f.$7aw(100,"AcDbViewportTableRecord"),f.$7aw(2,"*Active"),f.$77w(70,0),f.$79w(10,0),f.$79w(20,0),f.$79w(11,1),f.$79w(21,1),f.$79w(12,(O.left+O.right)/2),f.$79w(22,(O.down+O.up)/2),f.$79w(13,0),f.$79w(23,0),f.$79w(14,1),f.$79w(24,1),f.$79w(15,0),f.$79w(25,0),f.$79w(16,0),f.$79w(26,0),f.$79w(36,1),f.$79w(17,0),f.$79w(27,0),f.$79w(37,0),f.$79w(40,O.up-O.down),f.$79w(41,(O.up-O.down)/(O.right-O.left)),f.$79w(42,50),f.$79w(43,0),f.$79w(44,0),f.$79w(50,0),f.$79w(51,0),f.$77w(71,0),f.$77w(72,1e3),f.$77w(73,1),f.$77w(74,3),f.$77w(75,0),f.$77w(76,0),f.$77w(77,0),f.$77w(78,0),f.$71w()},J.prototype.$4ew=function(){var Y=this;Y.$75w("LTYPE",5,1),Y.$73w(14,"ByBlock"),Y.$73w(15,"ByLayer"),Y.$73w(16,"Continuous","Solid line"),Y.$71w()},J.prototype.$4fw=function(){var q=this;q.$75w("LAYER",2,1),q.$7aw(0,"LAYER"),q.$77w(5,10),q.$77w(330,2),q.$7aw(100,"AcDbSymbolTableRecord"),q.$7aw(100,"AcDbLayerTableRecord"),q.$77w(2,0),q.$77w(70,0),q.$77w(62,7),q.$7aw(6,"Continuous"),q.$7aw(390,"F"),q.$71w()},J.prototype.$50w=function(){var o=this;o.$75w("STYLE",3,2),o.$69w("Standard","11"),o.$69w("Annotative","DC"),o.$71w()},J.prototype.$51w=function(){var d=this;d.$75w("UCS",7,0),d.$71w()},J.prototype.$52w=function(){var R=this;R.$75w("VIEW",6,1),R.$71w()},J.prototype.$53w=function(){var h=this;h.$75w("APPID",9,7),h.$6aw("ACAD","12"),h.$6aw("AcadAnnoPO","DD"),h.$6aw("AcadAnnotative","DE"),h.$6aw("ACAD_DSTYLE_DIMJAG","DF"),h.$6aw("ACAD_DSTYLE_DIMTALN","E0"),h.$6aw("ACAD_MLEADERVER","107"),h.$6aw("ACAD_NAV_VCDISPLAY","1A6"),h.$71w()},J.prototype.$54w=function(){var t=this;t.$75w("DIMSTYLE","A",2),t.$7aw(100,"AcDbDimStyleTable"),t.$77w(71,2),t.$7aw(340,"27"),t.$7aw(340,"E1"),t.$71w()},J.prototype.$55w=function(){var Y=this;Y.$75w("BLOCK_RECORD",1,1),Y.$6bw("*Model_Space","1F","22"),Y.$6bw("*Paper_Space","58","59"),Y.$6bw("*Paper_Space0","5D","5E"),Y.$71w()},J.prototype.$56w=function(){var f=this;f.$70w(),f.$4dw(),f.$4ew(),f.$4fw(),f.$50w(),f.$52w(),f.$51w(),f.$53w(),f.$54w(),f.$55w(),f.$74w()},J.prototype.$57w=function(){var f=this;f.$68w("BLOCKS"),f.$6cw("*Model_Space",32,31),f.$6cw("*Paper_Space",90,88,!0),f.$6cw("*Paper_Space0",95,93,!0),f.$74w()},J.prototype.$58w=function(){var z=this;z.$68w("OBJECTS"),z.$6ew("C","0",0,1),z.$6fw(350,{ACAD_CIP_PREVIOUS_PRODUCT_INFO:"1A5",ACAD_COLOR:"73",ACAD_DETAILVIEWSTYLE:"1AB",ACAD_GROUP:"D",ACAD_LAYOUT:"1A",ACAD_MATERIAL:"72",ACAD_MLEADERSTYLE:"D7",ACAD_MLINESTYLE:"17",ACAD_PLOTSETTINGS:"19",ACAD_PLOTSTYLENAME:"E",ACAD_SCALELIST:"B6",ACAD_SECTIONVIEWSTYLE:"1A8",ACAD_TABLESTYLE:"86",ACAD_VISUALSTYLE:"99",ACDB_RECOMPOSE_DATA:"2A6",AcDbVariableDictionary:"66"}),z.$6ew("18E","2",1,1),z.$6fw(360,{ACAD_LAYERSTATES:"18F"}),z.$6ew("15D","1F",1,1),z.$6ew("D","C",0,1),z.$6ew("1A","C",0,1),z.$6fw(350,{Layout1:"59",Layout2:"5E",Model:"22"}),z.$6ew("D7","C",0,1),z.$6fw(350,{Annotative:"E5",Standard:"D8"}),z.$6ew("17","C",0,1),z.$6fw(350,{Standard:18}),z.$6ew("19","C",0,1),z.$74w()},J.prototype.$59w=function(){var h=this;h.$68w("ENTITIES"),h._dxfHandleValue=720;var r,M,_,S=h._entityList;for(r in S)if(_=S[r],_.id=r,!_.invisible)switch(M=_.type,h.$7aw(0,M),h.$6dw(),h.$78w(330,31),h.$7aw(100,"AcDbEntity"),h.$77w(62,_.color||7),h.$77w(8,_.layer||0),M){case"LINE":h.$5aw(_);break;case"TEXT":h.$65w(_);break;case"SOLID":h.$66w(_);break;case"LWPOLYLINE":h.$63w(_);break;case"CIRCLE":h.$5bw(_);break;case"ARC":h.$5cw(_);break;case"ELLIPSE":h.$5dw(_);break;case"SPLINE":h.$5ew(_);break;case"HATCH":h.$5fw(_)}h.$74w()},J.prototype.$5aw=function(s){var o=this,B=s.p1,M=s.p2;o.$7aw(100,"AcDbLine"),o.$7cw(10,B),o.$7cw(11,M)},J.prototype.$5bw=function(c){var U=this;U.$7aw(100,"AcDbCircle"),U.$7cw(10,c.center),U.$79w(40,c.radius)},J.prototype.$5cw=function(G){var H=this;H.$7aw(100,"AcDbCircle"),H.$7cw(10,G.center),H.$79w(40,G.radius),H.$7aw(100,"AcDbArc"),H.$79w(50,H.$8bw(G.startAngle)),H.$79w(51,H.$8bw(G.endAngle))},J.prototype.$5dw=function(K){var H=this;H.$7aw(100,"AcDbEllipse"),H.$7cw(10,K.center),H.$7cw(11,K.majorAxis),H.$79w(40,K.axisRatio),H.$79w(41,K.startAngle),H.$79w(42,K.endAngle)},J.prototype.$5ew=function(y){var P=this,w=[y.source];w=w.concat(y.ctrl,[y.dest]);var B,R=w.length;for(P.$7aw(6,"Continuous"),P.$7aw(100,"AcDbSpline"),P.$77w(70,8),P.$77w(71,R-1),P.$77w(72,2*R),P.$77w(73,R),P.$77w(74,0),P.$7aw(42,"0.000000001"),P.$7aw(43,"0.0000000001"),B=0;R>B;B++)P.$7aw(40,"0.0");for(B=0;R>B;B++)P.$7aw(40,"1.0");for(B=0;R>B;B++){var x=w[B];P.$79w(10,x.x),P.$79w(20,x.y),P.$79w(30,0)}},J.prototype.$5fw=function(q){var Z=this;Z.$7aw(6,"Continuous"),Z.$7aw(100,"AcDbHatch"),Z.$7cw(10,{x:0,y:0,z:0}),Z.$7cw(210,{x:0,y:0,z:1}),Z.$7aw(2,"SOLID"),Z.$77w(70,1),Z.$77w(71,0),Z.$60w(q),Z.$62w(q)},J.prototype.$60w=function(K){var B=this;B.$77w(91,1);var q,T,u,$,W=B._entityList;for(u=0,T=5,q=K.id-K.edgeNum;q<K.id;q++)switch($=W[q],$.type){case"ARC":case"CIRCLE":case"ELLIPSE":case"LINE":case"SPLINE":u+=1;break;case"LWPOLYLINE":u+=$.points.length-1}for(B.$77w(92,T),2!==(2&K.pathTypeFlag)&&B.$77w(93,u),q=K.id-K.edgeNum;q<K.id;q++)B.$61w(W[q]);B.$77w(97,0)},J.prototype.$61w=function(k){var f,E,G,m=this;switch(k.type){case"LWPOLYLINE":for(E=k.points.length,f=0;E-1>f;f++)m.$77w(72,1),m.$7cw(10,k.points[f]),m.$7cw(11,k.points[f+1]);break;case"ARC":m.$77w(72,2),m.$7cw(10,k.center),m.$79w(40,k.radius),m.$79w(50,m.$8bw(k.startAngle)),m.$79w(51,m.$8bw(k.endAngle));break;case"CIRCLE":m.$77w(72,2),m.$7cw(10,k.center),m.$7cw(40,k.radius),m.$79w(50,0),m.$79w(51,360);break;case"ELLIPSE":m.$77w(72,3),m.$7cw(10,k.center),m.$7cw(11,k.majorAxis),m.$79w(40,k.axisRatio),m.$79w(50,k.startAngle),m.$79w(51,k.endAngle);break;case"SPLINE":for(m.$77w(72,4),G=[k.source],G=G.concat(k.ctrl,[k.dest]),E=G.length,m.$77w(94,E-1),m.$77w(73,0),m.$77w(74,0),m.$77w(95,2*E),m.$77w(96,E),f=0;E>f;f++)m.$7aw(40,"0.0");for(f=0;E>f;f++)m.$7aw(40,"1.0");for(f=0;E>f;f++){var b=G[f];m.$79w(10,b.x),m.$79w(20,b.y)}m.$77w(97,0)}},J.prototype.$62w=function(){var G=this;G.$77w(75,1),G.$77w(76,1),G.$79w(47,0),G.$77w(98,1),G.$79w(10,0),G.$79w(20,0),G.$77w(450,0),G.$77w(451,0),G.$79w(460,0),G.$79w(461,0),G.$77w(452,0),G.$79w(462,1),G.$77w(453,0),G.$7aw(470,"LINEAR")},J.prototype.$63w=function(L){var c,k=this,f=L.points.length;for(k.$7aw(6,"Continuous"),k.$7aw(100,"AcDbPolyline"),k.$77w(90,f),k.$77w(70,0),k.$79w(43,0),c=0;f>c;c++)k.$7cw(10,L.points[c])},J.prototype.$64w=function(I){var _,V,x,Y=this,N=Y._viewport;for(V=0,x=I.length;x>V;V++)_=I[V],_.x<N.left&&(N.left=_.x),_.x>N.right&&(N.right=_.x),_.y<N.down&&(N.down=_.y),_.y>N.up&&(N.up=_.y)},J.prototype.$65w=function(Q){var E=this,B=Q.text,l=Q.pos,i=Q.size,y=Q.degree;Q.color,E.$7aw(100,"AcDbText"),E.$7cw(10,l),E.$79w(40,i),E.$7aw(1,B),E.$79w(50,360-y),E.$7aw(100,"AcDbText")},J.prototype.$66w=function(J){var f=this;f.$7aw(100,"AcDbTrace"),f.$7cw(10,J.points[0]),f.$7cw(11,J.points[1]),f.$7cw(12,J.points[2]),f.$7cw(13,J.points[3])},J.prototype.$67w=function(){this.$7aw(0,"EOF")},J.prototype.$68w=function(l){var $=this;$.$7aw(0,"SECTION"),$.$7aw(2,l)},J.prototype.$69w=function(X,u){var V=this;V.$7aw(0,"STYLE"),V.$7aw(5,u),V.$7aw(330,3),V.$7aw(100,"AcDbSymbolTableRecord"),V.$7aw(100,"AcDbTextStyleTableRecord"),V.$7aw(2,X),V.$77w(70,0),V.$79w(40,0),V.$79w(41,1),V.$79w(50,0),V.$77w(71,0),V.$79w(42,.2),V.$7aw(3,"Arial.ttf"),V.$7aw(4,""),V.$7aw(1001,"ACAD"),V.$7aw(1e3,"Arial"),V.$77w(1071,34)},J.prototype.$6aw=function(O,f){var y=this;y.$7aw(0,"APPID"),y.$7aw(5,f),y.$77w(330,9),y.$7aw(100,"AcDbSymbolTableRecord"),y.$7aw(100,"AcDbRegAppTableRecord"),y.$7aw(2,O),y.$77w(70,0)},J.prototype.$6bw=function(z,d,p){var I=this;I.$7aw(0,"BLOCK_RECORD"),I.$7aw(5,d),I.$77w(330,1),I.$7aw(100,"AcDbSymbolTableRecord"),I.$7aw(100,"AcDbBlockTableRecord"),I.$7aw(2,z),I.$7aw(340,p),I.$77w(70,0),I.$77w(280,1),I.$77w(281,0)},J.prototype.$6cw=function(Y,A,v,R){var K=this;K.$7aw(0,"BLOCK"),K.$78w(5,A),K.$78w(330,v),K.$7aw(100,"AcDbEntity"),R&&K.$77w(67,1),K.$77w(8,0),K.$7aw(100,"AcDbBlockBegin"),K.$7aw(2,Y),K.$77w(70,0),K.$79w(10,0),K.$79w(20,0),K.$79w(30,0),K.$7aw(3,Y),K.$7aw(1,""),K.$7aw(0,"ENDBLK"),K.$78w(5,A+1),K.$78w(330,v),K.$7aw(100,"AcDbEntity"),R&&K.$77w(67,1),K.$77w(8,0),K.$7aw(100,"AcDbBlockEnd")},J.prototype.$6dw=function(){var D=this;D.$78w(5,D._dxfHandleValue++)},J.prototype.$6ew=function(x,F,m,k){var l=this;l.$7aw(0,"DICTIONARY"),l.$7aw(5,x),"C"===F&&(l.$7aw(102,"{ACAD_REACTORS"),l.$7aw(330,F),l.$7aw(102,"}")),l.$7aw(330,F),l.$7aw(100,"AcDbDictionary"),m&&l.$77w(280,m),l.$77w(281,k)},J.prototype.$6fw=function(y,k){var d=this;for(var Z in k){var L=k[Z];d.$7aw(3,Z),d.$7aw(y,L)}},J.prototype.$70w=function(){this.$68w("TABLES")},J.prototype.$71w=function(){this.$7aw(0,"ENDTAB")},J.prototype.$72w=function(){this.$68w("HEADER")},J.prototype.$73w=function(s,t,X){var k=this;k.$7aw(0,"LTYPE"),k.$77w(5,s),k.$77w(330,5),k.$7aw(100,"AcDbSymbolTableRecord"),k.$7aw(100,"AcDbLinetypeTableRecord"),k.$7aw(2,t),k.$77w(70,0),k.$77w(3,X||""),k.$77w(72,65),k.$77w(73,0),k.$79w(40,0)},J.prototype.$74w=function(){this.$7aw(0,"ENDSEC")},J.prototype.$75w=function(U,n,Q){var N=this;N.$7aw(0,"TABLE"),N.$7aw(2,U),N.$77w(5,n),N.$77w(330,0),N.$7aw(100,"AcDbSymbolTable"),N.$77w(70,Q)},J.prototype.$76w=function(e){this.$7aw(999,e)},J.prototype.$77w=function(G,Q){return this.$7aw(G,Q)},J.prototype.$78w=function(y,E){return this.$7aw(y,E.toString(16).toUpperCase())},J.prototype.$79w=function(W,w){return w=""+w,w.indexOf(".")<0&&(w+=".0"),this.$7aw(W,w)},J.prototype.$7aw=function(H,v){var j;j=10>H?"  ":100>H?" ":"",this._lineContents.push(j+H+"\n"+v)},J.prototype.$7bw=function(Z){this._lineContents.push(Z.join("\n"))},J.prototype.$7cw=function(N,Q){var I=this;I.$79w(N,Q.x),I.$79w(N+10,Q.y),Q.z!==P&&I.$79w(N+20,Q.z)},J.prototype.$7dw=function(G){var E,b,K=this;for(E=0,b=G.length;b>E;E++)K.$7aw(0,"VERTEX"),K.$77w(8,0),K.$7cw(10,G[E])},J.prototype.$2cw=function(U){var g=this._matrix,K=U.x,y=U.y;return{x:g.a*K+g.c*y+g.tx,y:g.b*K+g.d*y+g.ty}},J.prototype.$2dw=function(w){for(var L=this,j=new Array(w.length),c=0,Z=w.length;Z>c;c++)j[c]=L.$2cw(w[c]);return j},J.prototype.$2ew=function(O){var q=this._matrix;return O*Math.sqrt(q.a*q.a+q.b*q.b)},J.prototype.$8bw=function(g){return 180*(g/Math.PI)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:this,Object);