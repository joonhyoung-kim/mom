!function(F,k){"use strict";var f="ht",i=F[f],Y="innerHTML",H="className",x=null,u="px",D=i.Default,J=D.getInternal(),C="0",n=function(){return document},T=function(k){return n().createElement(k)},K=function(){return T("canvas")},c=function(p,l,Z){p.style.setProperty(l,Z,x)},g=function(C,b,n){D.def(i.widget[C],b,n)},A=function(L,z){L.appendChild(z)},d=function(y,B){y.removeChild(B)},W=function(p,M,Y,v){p.addEventListener(M,Y,!!v)},Q=function(I,R,B,A){I.removeEventListener(R,B,!!A)},z=D.isTouchable;J.addMethod(D,{menuLabelFont:(z?"16":"13")+"px arial, sans-serif",menuLabelColor:"#000",menuBackground:"#F0EFEE",menuHoverBackground:"#648BFE",menuHoverLabelColor:"#fff",menuSeparatorWidth:1,menuSeparatorColor:"#999"},!0),i.widget.Menu=function(S){var w=this,p=w._view=J.createView(null,w),j=w.$1g=new i.widget.ContextMenu,X=T("ul");j._r=!0,j._view[H]+=" ht-widget-dropdownmenu",p[H]="ht-widget-menu",X[H]="header",c(p,"margin",C),c(p,"padding",C),c(p,"background",D.menuBackground),c(p,"-webkit-user-select","none"),c(p,"-moz-user-select","none"),c(p,"user-select","none"),c(p,"text-align","left"),c(p,"border-bottom",D.menuSeparatorWidth+"px solid "+D.menuSeparatorColor),c(p,"cursor","default"),c(p,"overflow","auto"),c(p,"white-space","nowrap"),c(p,"font",D.menuLabelFont),c(p,"color",D.menuLabelColor),c(p,"box-sizing","border-box"),c(p,"-moz-box-sizing","border-box"),c(X,"list-style","none"),c(X,"margin",C),c(X,"padding",C),c(X,"display","inline-block"),A(p,X),w.setItems(S),w.$2g=function(T){w.$3g(T)},w.$4g=function(u){w.$5g(u)},w.$6g=function(J){w.$7g(J)},w.$8g=function(I){w.$9g(I)},w.$9b=function(z){w.$10g(z)},w._autoShow=!0,w.setAutoShow(!1),j.afterHide=function(){w.$11g()},j.afterShow=function(){w.$12g()},Q(n(),"keydown",j.$3b),w.$3b=function(T){w.$13g(T)},w.invalidate()},g("Menu",k,{_items:x,$14g:D.menuHoverBackground,$15g:D.menuHoverLabelColor,$16g:{},_enableGlobalKey:!1,ms_v:1,$21g:"smallicons",$22g:0,$23g:0,$24g:"left",getDropDownMenu:function(){return this.$1g},setLayout:function(P){var J=this;if(J.$21g=P,J.setItems(J._items),"largeicons"===P){for(var K=J._view.querySelectorAll(".header-item"),q=0,x=0;x<K.length;x++){var j=K[x];q=Math.max(q,j.clientWidth)}for(var x=0;x<K.length;x++){var j=K[x];c(j,"min-width",q+u)}}this.invalidate()},getLayout:function(){return this.$21g},setHeaderItemHGap:function(A){this.$22g=A;for(var z=this._view.querySelectorAll(".header-item"),q=0;q<z.length;q++){var Y=z[q];c(Y,"margin-left",A+u),c(Y,"margin-right",A+u)}},getHeaderItemHGap:function(){return this.$22g},setHeaderItemVGap:function(t){this.$23g=t;for(var P=this._view.querySelectorAll(".header-item"),h=0;h<P.length;h++){var k=P[h];c(k,"margin-top",t+u),c(k,"margin-bottom",t+u)}},getHeaderItemVGap:function(){return this.$24g},setHeaderItemAlign:function(n){this.$24g=n,c(this._view,"text-align",n)},getHeaderItemAlign:function(){return this.$23g},enableGlobalKey:function(){var F=this,A=F._enableGlobalKey;A===!1&&(W(n(),"keydown",F.$3b),F._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,Q(n(),"keydown",this.$3b)},setHoverBackground:function(l){this.$14g=l},setHoverColor:function(G){this.$15g=G},setItems:function(s){var p=this,t=p._view,D=p.$21g;if(p._items=s,t.children[0][Y]="",p.$16g={},s&&s.length){for(var P=t.children[0],o=0,X=n().createDocumentFragment();o<s.length;o++){var v=s[o],i=T("li"),W=T("span");if(v.icon){var a=K();a[H]="menu-item-icon","smallicons"===D?(c(a,"height","1.2em"),c(a,"width","1.2em"),c(a,"vertical-align","middle")):(c(a,"height","32px"),c(a,"width","32px"),c(a,"display","block"),c(a,"margin","0 auto")),a.$20g=v.icon,A(i,a)}i[H]="header-item",c(i,"display","inline-block"),c(i,"vertical-align","top"),c(i,"padding","0 1.2em"),c(i,"line-height","1.8em"),"largeicons"===D&&c(i,"text-align","center"),c(i,"background-color","rgba(0,0,0,0)"),i.setAttribute("data-index",o),p.$16g[o]=v.items,W[Y]=v.label,"iconsonly"!==D&&A(i,W),A(X,i)}A(P,X)}},showDropdownMenu:function(J){var f=this,m=f.$16g[J],k=f.$1g,V=f._view.children[0].children[J],t=f.$17g;if(V&&V!==t){t&&f.hideDropdownMenu();var C=V.getBoundingClientRect(),p=D.getWindowInfo();f.$17g=V,k.setItems(m),k.show(C.left+p.left,C.top+C.height+p.top,!1)}},hideDropdownMenu:function(){this.$1g.hide()},getItemByProperty:function($,B){var e=this,p=e._items;return p&&0!==p.length?e.$1g.getItemByProperty($,B,p):x},$12g:function(){var N=this,P=N.$17g;P.style.background=N.$14g,P.style.color=N.$15g,N._autoShow||W(n(),z?"touchstart":"mousedown",N.$9b)},$11g:function(){var y=this,f=y.$17g;f&&(f.style.background="",f.style.color="",y.$17g=x),Q(n(),z?"touchstart":"mousedown",y.$9b)},$10g:function(z){var Z=this,c=Z._view,g=Z.$1g,b=c.children[0];!n().body.contains(c)||b.contains(z.target)||g._view.contains(z.target)||Z.hideDropdownMenu()},$13g:function(Y){var j=this,S=j.$1g;n().body.contains(j._view)&&S.$13b.$4b.call(S.$13b,Y,j._items)},setAutoShow:function(f){var O=this,I=O.$1g,B=O._view;O._autoShow!==f&&(O._autoShow?(Q(B,"mouseover",O.$2g),Q(B,"mouseout",O.$4g),Q(I._view,"mouseout",O.$4g),z||(W(B,"mouseover",O.$8g),W(B,"mouseout",O.$8g)),W(B,z?"touchstart":"mousedown",O.$6g)):(Q(B,"mouseover",O.$8g),Q(B,"mouseout",O.$8g),Q(B,z?"touchstart":"mousedown",O.$6g),Q(n(),z?"touchstart":"mousedown",O.$9b),z||(W(B,"mouseover",O.$2g),W(B,"mouseout",O.$4g),W(I._view,"mouseout",O.$4g))),O._autoShow=f)},$3g:function(s){var G=this,c=G._view.children[0],g=s.target;if(c!==g&&c.contains(g)){for(;"header-item"!==g[H];)g=g.parentNode;G.showDropdownMenu(g.getAttribute("data-index"))}},$5g:function(C){var g=this,r=g._view.children[0],z=g.$1g,T=C.target,W=C.relatedTarget;!r.contains(T)&&!z._view.contains(T)||r.contains(W)||z._view.contains(W)||g.hideDropdownMenu()},$7g:function(g){g.preventDefault();var G=this,P=G._view.children[0],m=G.$1g,U=g.target;if(D.isLeftButton(g)&&P!==U&&P.contains(U))if(z){for(;"header-item"!==U[H];)U=U.parentNode;var r=U.getAttribute("data-index"),m=G.$1g,L=G._view.children[0].children[r],q=G.$17g;m.isShowing()&&G.hideDropdownMenu(),L!==q&&G.showDropdownMenu(r)}else if(m.isShowing())G.hideDropdownMenu();else{for(;"header-item"!==U[H];)U=U.parentNode;G.showDropdownMenu(U.getAttribute("data-index"))}},$9g:function(e){var U=this,Z=U._view,C=U.$1g,M=e.target;if(Z.contains(M)){for(var X=Z.querySelectorAll(".header-item"),H=x,R=0;R<X.length;R++){var A=X[R];A.style.background="",A.style.color="","mouseover"===e.type?A.contains(M)&&(H=A):"mouseout"===e.type&&C.isShowing()&&U.$17g===A&&(H=A)}C.isShowing()&&(H||(H=U.$17g),U.showDropdownMenu(H.getAttribute("data-index"))),H&&(H.style.background=U.$14g,H.style.color=U.$15g)}},getShowingMenuIndex:function(){var c=this.$17g;return c?c.getAttribute("data-index"):-1},addTo:function(U){var o=this,v=o._view;A(U,v),o.invalidate()},dispose:function(){var M=this,f=M._view,m=M.$1g;f&&(M._autoShow?(Q(f,"mouseover",M.$2g),Q(f,"mouseout",M.$4g),Q(m._view,"mouseout",M.$4g)):(Q(f,"mouseover",M.$8g),Q(f,"mouseout",M.$8g),Q(f,z?"touchstart":"mousedown",M.$6g),Q(n(),z?"touchstart":"mousedown",M.$9b)),Q(n(),"keydown",M.$3b),m.dispose(),f.parentNode&&d(f.parentNode,f),M._view=M.$1g=M.$16g=M._items=M.$17g=M.$2g=M.$4g=M.$6g=M.$8g=M.$9b=M.$3b=x)},$19g:function(Q,M,P,V){var v=J.initContext(Q);J.translateAndScale(v,0,0,1),v.clearRect(0,0,P,V),D.drawStretchImage(v,D.getImage(M),"fill",0,0,P,V),v.restore()},validateImpl:function(){var P,H,Z,S=this,p=S._view,_=p.querySelectorAll(".menu-item-icon");for(Z=0;Z<_.length;Z++){var y=_[Z];P=y.clientWidth,H=y.clientHeight,P&&H&&(J.setCanvas(y,P,H),S.$19g(y,D.getImage(y.$20g),P,H))}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);