!function(J){"use strict";var n="ht",A=J[n],T=Math,t=T.max,Q=T.min,O=T.abs,Z=T.atan2,I=(T.cos,T.sin,T.ceil),N=A.Default,b=N.getInternal(),E=A.List,g=b.Mat,m=b.getNodeRect,U=b.intersectionLineRect,l=N.getDistance,H=N.setEdgeType,h="left",$="right",D="top",w="bottom",c="edge.type",B="edge.gap",G="edge.center",M="edge.extend",x=function(H,j){return m(H,j).width},X=function(U,z){return m(U,z).height},W=function(X,W){return b.getEdgeAgentPosition(X,W._40I,W.s("edge.source.position"),W.s("edge.source.offset.x"),W.s("edge.source.offset.y"),W.s("edge.source.anchor.x"),W.s("edge.source.anchor.y"))},q=function(s,T){return b.getEdgeAgentPosition(s,T._41I,T.s("edge.target.position"),T.s("edge.target.offset.x"),T.s("edge.target.offset.y"),T.s("edge.target.anchor.x"),T.s("edge.target.anchor.y"))},f=function(U,R){var _=U.s(c),g=U.getEdgeGroup();if(g){var $=0;if(g.eachSiblingEdge(function(I){R.isVisible(I)&&I.s(c)==_&&$++}),$>1)return U.s(B)*($-1)/2}return 0},Y=function(v,C){var H=v.s(c),g=v.isLooped();if(!v.getEdgeGroup())return g?v.s(B):0;var y,l=0,N=0,W=0;return v.getEdgeGroup().getSiblings().each(function($){$.each(function(i){if(i._40I===v._40I&&i.s(c)==H&&C.isVisible(i)){var D=i.s(B);y?(N+=W/2+D/2,W=D):(y=i,W=D),i===v&&(l=N)}})}),g?N-l+W:l-N/2},P=function(V,Z){var x=Z.s("edge.corner.radius");return N.toRoundedCorner(V,x)};b.addMethod(A.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),H("boundary",function(I,y,i,t){t||(y=-y);var J,a=W(i,I),p=q(i,I),o=m(i,I._40I),R=m(i,I._41I),_=new g(Z(p.y-a.y,p.x-a.x)),H=l(a,p),u=a.x,$=a.y;return J=_.tf(0,y),a={x:J.x+u,y:J.y+$},J=_.tf(H,y),p={x:J.x+u,y:J.y+$},J=U(a,p,o),J&&(a={x:J[0],y:J[1]}),J=U(a,p,R),J&&(p={x:J[0],y:J[1]}),{points:new E([a,p])}}),H("ripple",function(N,H,f,d){d||(H=-H);var $=W(f,N),k=q(f,N),P=l($,k),b=Q(N.s("edge.offset"),P/2),c=N.s("edge.ripple.size"),n=N.s("edge.ripple.length"),X=N.s("edge.ripple.both"),z=N.s(G),t=N.s("edge.ripple.elevation"),F=new E,u=N.s("edge.ripple.straight")?null:new E,V=new g(Z(k.y-$.y,k.x-$.x));d||(t=-t),P-=2*b,n>0&&(c=I(P/n));var o=P/c;u&&u.add(1);for(var y=0;c>y;y++)u&&u.add(3),0===y?F.add({x:b+o*y,y:z?0:H}):F.add({x:b+o*y,y:H}),F.add({x:b+o*y+o/2,y:t+H}),X&&(t=-t);for(F.add({x:b+P,y:z?0:H}),y=0;y<F.size();y++){var m=V.tf(F.get(y));m.x+=$.x,m.y+=$.y,F.set(y,m)}return{points:F,segments:u}}),H("h.v",function(K,V,d){V=Y(K,d);var I=new E,z=K.s(G),A=W(d,K),B=A.x,Q=A.y,H=q(d,K),T=H.x,r=H.y,t=0,o=0,i=T-B,D=r-Q;return z||(t=x(d,K._40I)/2,o=X(d,K._41I)/2),i>=0&&0>=D?(I.add({x:B+t,y:Q+V}),I.add({x:T+V,y:Q+V}),I.add({x:T+V,y:r+o})):0>=i&&D>=0?(I.add({x:B-t,y:Q+V}),I.add({x:T+V,y:Q+V}),I.add({x:T+V,y:r-o})):i>=0&&D>=0?(I.add({x:B+t,y:Q+V}),I.add({x:T-V,y:Q+V}),I.add({x:T-V,y:r-o})):(I.add({x:B-t,y:Q+V}),I.add({x:T-V,y:Q+V}),I.add({x:T-V,y:r+o})),P(I,K)}),H("v.h",function(F,V,m){V=Y(F,m);var _=new E,J=F.s(G),K=W(m,F),w=K.x,j=K.y,$=q(m,F),o=$.x,s=$.y,I=0,g=0,O=o-w,v=s-j;return J||(I=x(m,F._41I)/2,g=X(m,F._40I)/2),O>=0&&0>=v?(_.add({x:w+V,y:j-g}),_.add({x:w+V,y:s+V}),_.add({x:o-I,y:s+V})):0>=O&&v>=0?(_.add({x:w+V,y:j+g}),_.add({x:w+V,y:s+V}),_.add({x:o+I,y:s+V})):O>=0&&v>=0?(_.add({x:w-V,y:j+g}),_.add({x:w-V,y:s+V}),_.add({x:o-I,y:s+V})):(_.add({x:w-V,y:j-g}),_.add({x:w-V,y:s+V}),_.add({x:o+I,y:s+V})),P(_,F)}),H("ortho",function(i,$,z){var v=new E,U=i.s(G),o=i.s("edge.ortho"),w=i._40I,m=i._41I,J=W(z,i),g=J.x,V=J.y,H=q(z,i),a=H.x,_=H.y,Z=a-g,j=_-V,y=U?0:x(z,w)/2,I=U?0:X(z,w)/2,L=U?0:x(z,m)/2,b=U?0:X(z,m)/2,N=(Z-(y+L)*(Z>0?1:-1))*o,s=(j-(I+b)*(j>0?1:-1))*o;return O(Z)<O(j)?Z>=0&&0>=j?(v.add({x:g+$,y:V-I}),v.add({x:g+$,y:V+s+$-I}),v.add({x:a+$,y:V+s+$-I}),v.add({x:a+$,y:_+b})):0>=Z&&j>=0?(v.add({x:g+$,y:V+I}),v.add({x:g+$,y:V+s+$+I}),v.add({x:a+$,y:V+s+$+I}),v.add({x:a+$,y:_-b})):Z>=0&&j>=0?(v.add({x:g+$,y:V+I}),v.add({x:g+$,y:V+s-$+I}),v.add({x:a+$,y:V+s-$+I}),v.add({x:a+$,y:_-b})):(v.add({x:g+$,y:V-I}),v.add({x:g+$,y:V+s-$-I}),v.add({x:a+$,y:V+s-$-I}),v.add({x:a+$,y:_+b})):Z>=0&&0>=j?(v.add({x:g+y,y:V+$}),v.add({x:g+N+$+y,y:V+$}),v.add({x:g+N+$+y,y:_+$}),v.add({x:a-L,y:_+$})):0>=Z&&j>=0?(v.add({x:g-y,y:V+$}),v.add({x:g+N+$-y,y:V+$}),v.add({x:g+N+$-y,y:_+$}),v.add({x:a+L,y:_+$})):Z>=0&&j>=0?(v.add({x:g+y,y:V+$}),v.add({x:g+N-$+y,y:V+$}),v.add({x:g+N-$+y,y:_+$}),v.add({x:a-L,y:_+$})):(v.add({x:g-y,y:V+$}),v.add({x:g+N-$-y,y:V+$}),v.add({x:g+N-$-y,y:_+$}),v.add({x:a+L,y:_+$})),P(v,i)}),H("flex",function(c,y,e){var m=new E,j=c.s("edge.flex")+f(c,e),R=c.s(G),J=c._40I,A=c._41I,C=W(e,c),F=C.x,i=C.y,p=q(e,c),g=p.x,t=p.y,d=g-F,B=t-i,D=R?0:x(e,J)/2,H=R?0:X(e,J)/2,_=R?0:x(e,A)/2,s=R?0:X(e,A)/2,w=d>0?j:-j,K=B>0?j:-j;return O(d)<O(B)?d>=0&&0>=B?(m.add({x:F+y,y:i-H}),m.add({x:F+y,y:i+K+y-H}),m.add({x:g+y,y:t-K+y+s}),m.add({x:g+y,y:t+s})):0>=d&&B>=0?(m.add({x:F+y,y:i+H}),m.add({x:F+y,y:i+K+y+H}),m.add({x:g+y,y:t-K+y-s}),m.add({x:g+y,y:t-s})):d>=0&&B>=0?(m.add({x:F+y,y:i+H}),m.add({x:F+y,y:i+K-y+H}),m.add({x:g+y,y:t-K-y-s}),m.add({x:g+y,y:t-s})):(m.add({x:F+y,y:i-H}),m.add({x:F+y,y:i+K-y-H}),m.add({x:g+y,y:t-K-y+s}),m.add({x:g+y,y:t+s})):d>=0&&0>=B?(m.add({x:F+D,y:i+y}),m.add({x:F+w+y+D,y:i+y}),m.add({x:g-w+y-_,y:t+y}),m.add({x:g-_,y:t+y})):0>=d&&B>=0?(m.add({x:F-D,y:i+y}),m.add({x:F+w+y-D,y:i+y}),m.add({x:g-w+y+_,y:t+y}),m.add({x:g+_,y:t+y})):d>=0&&B>=0?(m.add({x:F+D,y:i+y}),m.add({x:F+w-y+D,y:i+y}),m.add({x:g-w-y-_,y:t+y}),m.add({x:g-_,y:t+y})):(m.add({x:F-D,y:i+y}),m.add({x:F+w-y-D,y:i+y}),m.add({x:g-w-y+_,y:t+y}),m.add({x:g+_,y:t+y})),P(m,c)}),H("extend.east",function(j,Z,s){var U=new E,S=j.s(M)+f(j,s),n=j.s(G),w=W(s,j),N=w.x+(n?0:x(s,j._40I)/2),T=w.y,k=q(s,j),A=k.x+(n?0:x(s,j._41I)/2),X=k.y,J=t(N,A)+S;return T>X?(U.add({x:N,y:T+Z}),U.add({x:J+Z,y:T+Z}),U.add({x:J+Z,y:X-Z}),U.add({x:A,y:X-Z})):(U.add({x:N,y:T-Z}),U.add({x:J+Z,y:T-Z}),U.add({x:J+Z,y:X+Z}),U.add({x:A,y:X+Z})),P(U,j)}),H("extend.west",function(c,$,U){var b=new E,l=c.s(M)+f(c,U),p=c.s(G),I=W(U,c),o=I.x-(p?0:x(U,c._40I)/2),n=I.y,J=q(U,c),d=J.x-(p?0:x(U,c._41I)/2),O=J.y,N=Q(o,d)-l;return n>O?(b.add({x:o,y:n+$}),b.add({x:N-$,y:n+$}),b.add({x:N-$,y:O-$}),b.add({x:d,y:O-$})):(b.add({x:o,y:n-$}),b.add({x:N-$,y:n-$}),b.add({x:N-$,y:O+$}),b.add({x:d,y:O+$})),P(b,c)}),H("extend.north",function(C,k,S){var I=new E,y=C.s(M)+f(C,S),n=C.s(G),J=W(S,C),T=J.x,b=J.y-(n?0:X(S,C._40I)/2),a=q(S,C),A=a.x,H=a.y-(n?0:X(S,C._41I)/2),j=Q(b,H)-y;return T>A?(I.add({y:b,x:T+k}),I.add({y:j-k,x:T+k}),I.add({y:j-k,x:A-k}),I.add({y:H,x:A-k})):(I.add({y:b,x:T-k}),I.add({y:j-k,x:T-k}),I.add({y:j-k,x:A+k}),I.add({y:H,x:A+k})),P(I,C)}),H("extend.south",function(V,A,Y){var h=new E,w=V.s(M)+f(V,Y),j=V.s(G),b=W(Y,V),g=b.x,I=b.y+(j?0:X(Y,V._40I)/2),p=q(Y,V),J=p.x,i=p.y+(j?0:X(Y,V._41I)/2),v=t(I,i)+w;return g>J?(h.add({y:I,x:g+A}),h.add({y:v+A,x:g+A}),h.add({y:v+A,x:J-A}),h.add({y:i,x:J-A})):(h.add({y:I,x:g-A}),h.add({y:v+A,x:g-A}),h.add({y:v+A,x:J+A}),h.add({y:i,x:J+A})),P(h,V)});var i=function(t,w,D,j,H){if(j.sort(function(T,p){var c=T.getSourceAgent()===w?T.getTargetAgent():T.getSourceAgent(),Y=p.getSourceAgent()===w?p.getTargetAgent():p.getSourceAgent(),K=c.p(),S=Y.p();if(D===h||D===$){if(K.y>S.y)return 1;if(K.y<S.y)return-1}else{if(K.x>S.x)return 1;if(K.x<S.x)return-1}return N.sortFunc(T.getId(),p.getId())}),H){for(var J,i,Y,z=t.getSourceAgent(),P=t.getTargetAgent(),d=0;d<j.size();d++){var K=j.get(d);K.getSourceAgent()===z&&K.getTargetAgent()===P||K.getTargetAgent()===z&&K.getSourceAgent()===P?(i||(i=new E),i.add(K,0)):i?(Y||(Y=new E),Y.add(K)):(J||(J=new E),J.add(K))}j.clear(),J&&j.addAll(J),i&&j.addAll(i),Y&&j.addAll(Y)}var r=j.indexOf(t),b=j.size(),R=t.s(B);return{side:D,index:r,size:b,offset:-R*(b-1)/2+R*r}},v=function(H,F,S,j,k){var V=F.s(c);return i(F,S,j,S.getAgentEdges().toList(function(L){return H.isVisible(L)&&L.s(c)===V}),k)},o=function(m,C){var E=m.getSourceAgent()===C?m.getTargetAgent():m.getSourceAgent(),x=C.p(),S=E.p(),y=S.x-x.x,r=S.y-x.y;return y>0&&O(r)<=y?$:0>y&&O(r)<=-y?h:r>0&&O(y)<=r?w:D},s=function(W,A,P){var n=A.s(c),Z=o(A,P);return i(A,P,Z,P.getAgentEdges().toList(function(q){return W.isVisible(q)&&q.s(c)===n&&o(q,P)===Z}))},K=function(J,c){var p=J.getSourceAgent()===c,V=p?J.getTargetAgent():J.getSourceAgent(),I=c.p(),l=V.p();return p?I.y>l.y?D:w:I.x<l.x?$:h},V=function(n,o,V){var g=o.s(c),U=K(o,V);return i(o,V,U,V.getAgentEdges().toList(function(l){return n.isVisible(l)&&l.s(c)===g&&K(l,V)===U}),U===$||U===w)},j=function(o,I){var s=o.getSourceAgent()===I,v=s?o.getTargetAgent():o.getSourceAgent(),A=I.p(),b=v.p();return s?A.x<b.x?$:h:A.y>b.y?D:w},y=function(U,S,u){var Y=S.s(c),l=j(S,u);return i(S,u,l,u.getAgentEdges().toList(function(J){return U.isVisible(J)&&J.s(c)===Y&&j(J,u)===l}),l===$||l===w)},d=function(t,B,j){var v=t.getSourceAgent(),Q=t.getTargetAgent(),n=v.getId()>Q.getId(),Y=n?Q:v,_=n?v:Q,i=Y.p(),l=_.p(),e=j(B,t,Y),L=j(B,t,_),g=t.s(G),W=g?0:x(B,Y)/2,o=g?0:x(B,_)/2,T=g?0:X(B,Y)/2,r=g?0:X(B,_)/2,V=e.offset,F=L.offset,I=e.side,q=L.side,C=new E;return I===D?(C.add({x:i.x+V,y:i.y-T}),C.add({x:i.x+V,y:l.y+F}),q===h?C.add({x:l.x-o,y:l.y+F}):C.add({x:l.x+o,y:l.y+F})):I===w?(C.add({x:i.x+V,y:i.y+T}),C.add({x:i.x+V,y:l.y+F}),q===h?C.add({x:l.x-o,y:l.y+F}):C.add({x:l.x+o,y:l.y+F})):I===h?(C.add({x:i.x-W,y:i.y+V}),C.add({x:l.x+F,y:i.y+V}),q===w?C.add({x:l.x+F,y:l.y+r}):C.add({x:l.x+F,y:l.y-r})):I===$&&(C.add({x:i.x+W,y:i.y+V}),C.add({x:l.x+F,y:i.y+V}),q===w?C.add({x:l.x+F,y:l.y+r}):C.add({x:l.x+F,y:l.y-r})),n&&C.reverse(),P(C,t)};H("ortho2",function(H,d,a){var c,L,l=H.s(G),V=H.s("edge.ortho"),M=H.getSourceAgent(),m=H.getTargetAgent(),e=M.getId()>m.getId(),S=e?m:M,C=e?M:m,F=S.p(),U=C.p(),o=s(a,H,S),t=s(a,H,C),A=l?0:x(a,S)/2,N=l?0:X(a,S)/2,R=l?0:x(a,C)/2,f=l?0:X(a,C)/2,B=new E,W=o.offset,p=t.offset,n=o.side;return n===$?(c=U.y>F.y?-W:W,L=F.x+A+(U.x-R-F.x-A)*V,B.add({x:F.x+A,y:F.y+W}),B.add({x:L+c,y:F.y+W}),B.add({x:L+c,y:U.y+p}),B.add({x:U.x-R,y:U.y+p})):n===h?(c=U.y>F.y?-W:W,L=F.x-A-(F.x-A-U.x-R)*V,B.add({x:F.x-A,y:F.y+W}),B.add({x:L-c,y:F.y+W}),B.add({x:L-c,y:U.y+p}),B.add({x:U.x+R,y:U.y+p})):n===w?(c=U.x>F.x?-W:W,L=F.y+N+(U.y-f-F.y-N)*V,B.add({x:F.x+W,y:F.y+N}),B.add({x:F.x+W,y:L+c}),B.add({x:U.x+p,y:L+c}),B.add({x:U.x+p,y:U.y-f})):n===D&&(c=U.x>F.x?-W:W,L=F.y-N-(F.y-N-U.y-f)*V,B.add({x:F.x+W,y:F.y-N}),B.add({x:F.x+W,y:L-c}),B.add({x:U.x+p,y:L-c}),B.add({x:U.x+p,y:U.y+f})),e&&B.reverse(),P(B,H)},!0),H("flex2",function(f,F,y){var C,c=f.getSourceAgent(),R=f.getTargetAgent(),k=c.getId()>R.getId(),d=k?R:c,Y=k?c:R,J=d.p(),l=Y.p(),p=s(y,f,d),e=s(y,f,Y),z=f.s(G),Q=f.s("edge.flex")+(p.size-1)/2*f.s(B),n=z?0:x(y,d)/2,a=z?0:X(y,d)/2,A=z?0:x(y,Y)/2,t=z?0:X(y,Y)/2,N=new E,L=p.offset,O=e.offset,S=p.side;return S===$?(C=l.y>J.y?-L:L,N.add({x:J.x+n,y:J.y+L}),N.add({x:J.x+n+Q+C,y:J.y+L}),N.add({x:l.x-A-Q+C,y:l.y+O}),N.add({x:l.x-A,y:l.y+O})):S===h?(C=l.y>J.y?-L:L,N.add({x:J.x-n,y:J.y+L}),N.add({x:J.x-n-Q-C,y:J.y+L}),N.add({x:l.x+A+Q-C,y:l.y+O}),N.add({x:l.x+A,y:l.y+O})):S===w?(C=l.x>J.x?-L:L,N.add({x:J.x+L,y:J.y+a}),N.add({x:J.x+L,y:J.y+a+Q+C}),N.add({x:l.x+O,y:l.y-t-Q+C}),N.add({x:l.x+O,y:l.y-t})):S===D&&(C=l.x>J.x?-L:L,N.add({x:J.x+L,y:J.y-a}),N.add({x:J.x+L,y:J.y-a-Q-C}),N.add({x:l.x+O,y:l.y+t+Q-C}),N.add({x:l.x+O,y:l.y+t})),k&&N.reverse(),P(N,f)},!0),H("extend.north2",function(R,i,p){var F=R.getSourceAgent(),$=R.getTargetAgent(),u=F.getId()>$.getId(),C=u?$:F,V=u?F:$,x=C.p(),Y=V.p(),n=v(p,R,C,D),o=v(p,R,V,D,!0),Z=R.s(G),W=Z?0:X(p,C)/2,m=Z?0:X(p,V)/2,S=n.offset,j=o.offset,s=R.s(M)+(n.size-1)/2*R.s(B),z=Q(x.y-W,Y.y-m)-s+(x.x<Y.x?S:-S),J=new E;return J.add({x:x.x+S,y:x.y-W}),J.add({x:x.x+S,y:z}),J.add({x:Y.x+j,y:z}),J.add({x:Y.x+j,y:Y.y-m}),u&&J.reverse(),P(J,R)},!0),H("extend.south2",function(m,u,k){var n=m.getSourceAgent(),b=m.getTargetAgent(),h=n.getId()>b.getId(),V=h?b:n,J=h?n:b,f=V.p(),c=J.p(),i=v(k,m,V,w),T=v(k,m,J,w,!0),z=m.s(G),C=z?0:X(k,V)/2,j=z?0:X(k,J)/2,R=i.offset,W=T.offset,Z=m.s(M)+(i.size-1)/2*m.s(B),L=t(f.y+C,c.y+j)+Z+(f.x>c.x?R:-R),S=new E;return S.add({x:f.x+R,y:f.y+C}),S.add({x:f.x+R,y:L}),S.add({x:c.x+W,y:L}),S.add({x:c.x+W,y:c.y+j}),h&&S.reverse(),P(S,m)},!0),H("extend.west2",function(f,L,W){var t=f.getSourceAgent(),N=f.getTargetAgent(),O=t.getId()>N.getId(),a=O?N:t,l=O?t:N,j=a.p(),q=l.p(),F=v(W,f,a,D),u=v(W,f,l,D,!0),R=f.s(G),U=R?0:x(W,a)/2,i=R?0:x(W,l)/2,H=F.offset,e=u.offset,X=f.s(M)+(F.size-1)/2*f.s(B),c=Q(j.x-U,q.x-i)-X+(j.y<q.y?H:-H),o=new E;return o.add({x:j.x-U,y:j.y+H}),o.add({x:c,y:j.y+H}),o.add({x:c,y:q.y+e}),o.add({x:q.x-i,y:q.y+e}),O&&o.reverse(),P(o,f)},!0),H("extend.east2",function(g,W,f){var d=g.getSourceAgent(),K=g.getTargetAgent(),H=d.getId()>K.getId(),r=H?K:d,O=H?d:K,z=r.p(),Q=O.p(),U=v(f,g,r,D),_=v(f,g,O,D,!0),o=g.s(G),h=o?0:x(f,r)/2,L=o?0:x(f,O)/2,b=U.offset,a=_.offset,S=g.s(M)+(U.size-1)/2*g.s(B),q=t(z.x+h,Q.x+L)+S+(z.y>Q.y?b:-b),k=new E;return k.add({x:z.x+h,y:z.y+b}),k.add({x:q,y:z.y+b}),k.add({x:q,y:Q.y+a}),k.add({x:Q.x+L,y:Q.y+a}),H&&k.reverse(),P(k,g)},!0),H("v.h2",function(i,Y,M){return d(i,M,V)},!0),H("h.v2",function(X,i,a){return d(X,a,y)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);