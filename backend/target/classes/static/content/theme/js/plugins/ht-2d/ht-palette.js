!function(A,J,i){"use strict";var w="px",I="0",o="innerHTML",T="className",g=ht.Default,z=ht.Color,a=ht.Node,$="position",Q="top",p="left",e=g.animate,O=g.getInternal(),u="width",I="0",N="none",F="max-height",j="font",d="background",t="border-box",q="user-select",B="box-sizing",c="overflow",y=g.isTouchable,O=g.getInternal(),h=z.titleIconBackground,k=g.scrollBarInteractiveSize,K=/msie 9/.test(A.navigator?A.navigator.userAgent.toLowerCase():""),n=null,G=function(){return document},W=function($){return G().createElement($)},x=function(){return W("div")},P=function(){var f=x(),j=f.style;return j.msTouchAction=N,j.cursor="default",y&&j.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",n),j.position="absolute",j.left=I,j.top=I,f},L=function(){return W("canvas")},R=function(){return document.body},X=function(Y,T,R){Y.style.setProperty(T,R,n)},f=function(b,c){b.style.removeProperty(c)},D=function(G,r,w){g.def(ht.widget[G],r,w)},M=function(s,a){s.appendChild(a)},b=function(e,q){e.removeChild(q)},l=function(u,T,S,G){u.addEventListener(T,S,!!G)};O.addMethod(g,{paletteExpandIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:h,rotation:3.14}]},paletteCollapseIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:h}]},paletteTitleLabelColor:g.labelSelectColor,paletteTitleLabelFont:g.labelFont,paletteContentLabelFont:g.labelFont,paletteContentLabelColor:"#777",paletteContentBackground:"#fff",paletteTitleHeight:g.widgetTitleHeight,paletteTitleBackground:z.titleBackground,paletteTitleHoverBackground:z.titleBackground,paletteSeparatorWidth:1,paletteSeparatorColor:i,paletteItemHoverBorderColor:z.highlight,paletteItemSelectBackground:z.highlight},!0);var E=".palette-item:hover{border: 1px solid "+g.paletteItemHoverBorderColor+" !important}"+" .palette-header:hover{background: "+g.paletteTitleHoverBackground+" !important}",Y=document.createElement("style");y||(Y.styleSheet?Y.styleSheet.cssText=E:Y.appendChild(G().createTextNode(E))),G().getElementsByTagName("head")[0].appendChild(Y);var r=function(H){var q=this;q.$22h=H,q.addListeners()};g.def(r,J,{ms_listener:1,getView:function(){return this.$22h.getView()},$26h:function(){var _=this;_.$36h&&R().removeChild(_.$36h),_.$23h=_.$24h=_.$25h=_.$35h=_.$36h=n},handle_touchstart:function(B){for(var h,H=this,r=H.$22h,K=B.target,Q=r.sm(),A=r.dm(),I="palette-header",i="palette-header-tool",k="palette-item",F=!1,v=!1,S=!1;K&&(K[T]||"").indexOf(I)<0&&(K[T]||"").indexOf(k)<0;)K=K.parentNode;if(K&&K[T].indexOf(i)>=0?F=!0:K&&K[T].indexOf(I)>=0?S=!0:K&&K[T].indexOf(k)>=0&&(v=!0),g.isLeftButton(B))if(H.$27h(B))H.$24h=g.getClientPoint(B),H.$25h=r.ty();else if(F){g.preventDefault(B),h=K.parentNode.$11h;var D=A.getDataById(h),E=D.s("tools")[K.toolIndex];E.action&&E.action.call(r)}else if(S){g.preventDefault(B),h=K.$11h;var D=A.getDataById(h);D.isExpanded()?D.setExpanded(!1):D.setExpanded(!0)}else if(v){h=K.$11h;var n=A.getDataById(h);Q.ss(n),r.handleDragAndDrop&&(g.preventDefault(B),n.s("draggable")&&(r.handleDragAndDrop(B,"prepare"),H.$35h=0)),n.s("draggable")||(g.preventDefault(B),H.$24h=g.getClientPoint(B),H.$25h=r.ty())}else g.preventDefault(B),H.$24h=g.getClientPoint(B),H.$25h=r.ty();else H.$26h(B)},handle_mousedown:function(R){this.handle_touchstart(R)},handle_mousewheel:function(M){this.handleScroll(M,M.wheelDelta/40,M.wheelDelta!==M.wheelDeltaX)},handle_DOMMouseScroll:function(S){this.handleScroll(S,-S.detail,1)},handleScroll:function(V,v,l){var O=this.$22h;g.preventDefault(V),l&&O._41o()&&O.ty(O.ty()+20*v)},handle_mouseup:function(r){this.handle_touchend(r)},handle_touchend:function(V){var Q=this;Q.$37h(V),Q.$26h(V)},handleWindowMouseUp:function(L){this.handleWindowTouchEnd(L)},handleWindowTouchEnd:function(V){var R=this;R.$37h(V),R.$26h(V)},$37h:function(Q){var M=this,m=M.$22h;2===M.$35h&&(M.$35h=3,m.handleDragAndDrop(Q,"end"))},handleWindowMouseMove:function(s){this.handleWindowTouchMove(s)},handleWindowTouchMove:function(Z){var G=this,A=G.$22h,d=G.$23h,z=G.$24h,E=G.$25h,P=g.getClientPoint(Z),j=A._29I,V=G.$36h;if(1===G.$35h||2===G.$35h){if(G.$35h=2,A.handleDragAndDrop(Z,"between"),y){var e=Z.touches[0];Z=e?e:Z.changedTouches[0]}V.style.left=Z.pageX-parseInt(V.width)/2+w,V.style.top=Z.pageY-parseInt(V.height)/2+w}else"p"===d?A.ty(E+P.y-z.y):"v"===d&&A.ty(E+(z.y-P.y)/j.height*A._59I)},handle_mousemove:function(i){this.handle_touchmove(i)},handle_touchmove:function(U){if(!g.isDragging()&&g.isLeftButton(U)){var c=this,r=c.$22h,Q=c.$27h(U);if(c.$24h){if(!c.$23h){if(g.getDistance(g.getClientPoint(U),c.$24h)<2)return;c.$23h=Q?"v":"p",g.startDragging(c)}}else if(Q)r._43o();else if(0===c.$35h){if(c.$35h=1,r.handleDragAndDrop(U,"begin"),y){var x=U.touches[0];U=x?x:U.changedTouches[0]}var N=c.$36h=new Image,C=r.$10h[r.sm().ld().getId()].querySelector(".image-box"),h=parseInt(C.style.width),Z=parseInt(C.style.height);N.draggable=!1,N.src=C.toDataURL(),N.width=h,N.height=Z,N.style.position="absolute",N.style.left=U.pageX-h/2+w,N.style.top=U.pageY-Z/2+w,R().appendChild(N),g.startDragging(c)}}},$27h:function(O){var F=this.$22h,$=F.getView(),D=$.getBoundingClientRect(),g=F._29I,X=O.clientX-D.left+$.scrollLeft;return F._41o()&&g.x+g.width-X<k}}),ht.widget.Palette=function(u){var F=this,i=F._view=O.createView(null,F);F.$9h={},F.$10h={},F.$4h={},F._29I={x:0,y:0,width:0,height:0},F._59I=0,F.dm(u?u:new ht.DataModel),i[T]="ht-widget-palette",F.$29h=new r(F),X(i,d,g.paletteContentBackground),X(i,c,"auto"),X(i,B,t),X(i,"-moz-"+B,t),X(i,"-webkit-"+q,N),X(i,"-moz-"+q,N),X(i,"-ms-"+q,N),X(i,q,N),X(i,"position","absolute"),X(i,"overflow","hidden"),M(i,F._79O=P()),l(i,"dragstart",function(P){P.dataTransfer&&(P.dataTransfer.setData("Text","nodeid:"+P.target.$11h),P.dataTransfer.effectAllowed="all",F.$29h.$26h())})},D("Palette",J,{ms_v:1,ms_fire:1,ms_dm:1,ms_sm:1,ms_vs:1,ms_ac:["itemImageWidth","itemImageHeight","itemImagePadding","itemMargin","layout","autoHideScrollBar","scrollBarSize","scrollBarColor"],$30h:0,_itemImagePadding:4,_itemImageWidth:70,_itemImageHeight:50,_itemMargin:10,_layout:"largeicons",_autoHideScrollBar:g.autoHideScrollBar,_scrollBarSize:g.scrollBarSize,_scrollBarColor:g.scrollBarColor,getViewRect:function(){return this._29I},ty:function(S){return S?(this.setTranslateY(S),void 0):this.getTranslateY()},setTranslateY:function(E){if(this.$32h==n){var Y=this,G=Y.$33h(E),p=Y.$30h;Y.$30h=G,Y.fp("translateY",p,G)}},getTranslateY:function(){return this.$30h},setLayout:function(i){var h,m,n=this,Z=n._layout;n._layout=i,"smallicons"===i?h=m=20:"iconsonly"===i?h=m=50:(h=70,m=50),n.setItemImageWidth(h),n.setItemImageHeight(m),n.setItemImagePadding(4),n.fp("layout",Z,i)},getDataAt:function(Z){for(var l=Z.target;l&&l.$11h==n;)l=l.parentNode;return l&&l.$11h!=n?this.getDataModel().getDataById(l.$11h):void 0},$20h:function(){var d=16;return y&&(d*=1.2),d},$19h:function(){return g.paletteTitleHeight},$18h:function(){var I=g.paletteSeparatorWidth,x=g.paletteTitleBackground,N=g.paletteSeparatorColor||g.brighter(x);return I+w+" solid "+N},$17h:function(G){X(G,"cursor","pointer"),X(G,"display","inline-block"),X(G,"margin-right",(y?8:4)+w),X(G,"vertical-align",Q)},$1h:function(N){var D=this,V=x(),P=x(),A=W("span");V[T]="palette-header",X(V,$,"relative"),X(V,d,g.paletteTitleBackground),X(V,"color",g.paletteTitleLabelColor),X(V,Q,I),X(V,B,t),X(V,"-moz-"+B,t),X(V,"padding","0 5px 0 0"),X(V,"border-top",D.$18h()),X(V,u,"100%"),X(V,"cursor","pointer"),X(V,"white-space","nowrap"),X(V,c,"hidden"),X(V,j,g.paletteTitleLabelFont),X(V,"line-height",D.$19h()+w),V.$11h=N.getId();var H=L(),S=D.$19h(),n=D.$20h();D.$17h(H),O.setCanvas(H,n,S),M(V,H);var J=N.s("tools");if(J)for(var r=0;r<J.length;r++){var U=L();D.$17h(U),O.setCanvas(U,n,S),U[T]="palette-header-tool palette-header-tool"+N.getId()+"-"+r,U.style.position="absolute",U.style.right=(n+10)*r+"px",U.toolIndex=r,M(V,U)}return H[T]="palette-toggle-icon-"+N.getId(),P[T]="palette-content",X(P,"max-height",0+w),X(P,j,g.paletteContentLabelFont),X(P,c,"hidden"),P.$11h=N.getId(),D.$9h[N.getId()]=P,A[o]=N.getName(),X(A,j,g.paletteTitleLabelFont),M(V,H),M(V,A),[V,P]},$2h:function(y){var j=this,n=j._layout,V=K&&y.s("draggable")?W("a"):x(),h=L(),a=x(),s=y.getName()||"",f=y.s("title")||y.getToolTip()||s,C=j._itemMargin;h[T]="image-box";var A=j.getItemImageWidth(),z=j.getItemImageHeight();return O.setCanvas(h,A,z),M(V,h),a[o]=s,a[T]="label-box","iconsonly"!==n&&M(V,a),V[T]="palette-item",X(V,"vertical-align",Q),X(V,"cursor","pointer"),X(V,"border-radius",5+w),X(V,"border","1px solid transparent"),X(V,"text-align","center"),X(V,"display","inline-block"),X(V,"margin-left",C+w),X(V,"margin-top",C+w),X(V,"color",g.paletteContentLabelColor),"smallicons"===n?(X(h,"vertical-align","middle"),X(V,"margin-left",2+w),X(V,"margin-top",2+w),X(V,"padding",2+w),X(V,"text-align",p),X(a,"display","inline-block"),X(a,"min-width",j.$21h+j._itemMargin+w)):"largeicons"===n&&(X(a,"max-width",A+w),X(a,"overflow","hidden")),V.$11h=y.getId(),f&&(V.title=f),y.s("draggable")&&!j.handleDragAndDrop&&(K?(V.href="#",X(V,"text-decoration",N)):V.draggable="true"),V},$16h:function(H,k,z,$){var Z=O.initContext(H);O.translateAndScale(Z,0,0,1),Z.clearRect(0,0,z,z);var p=(z-$)/2;g.drawStretchImage(Z,g.getImage(k),"fill",0,p,$,$),Z.restore()},$15h:function(I){var Q=this,Z=I.getId(),C=Q._view.querySelector(".palette-toggle-icon-"+Z),k=I.isExpanded()?g.paletteCollapseIcon:g.paletteExpandIcon;if(C&&k){var m=Q.$19h(),z=Q.$20h();Q.$16h(C,k,m,z)}},_drawToolsIcon:function(z){var N=this,G=z.s("tools");if(G)for(var b=0;b<G.length;b++){var U=N._view.querySelector(".palette-header-tool"+z.getId()+"-"+b),l=G[b].icon,j=N.$19h(),D=N.$20h();N.$16h(U,l,j,D)}},$14h:function(F){var K=this,m=F.getId(),J=K.$10h[m].querySelector(".image-box"),E=F.getImage(),U=F.s("image.stretch");if(J&&E){var Q=O.initContext(J),W=K.getItemImagePadding();W="smallicons"===K._layout?W/2:W;var k=K.getItemImageWidth()-2*W,u=K.getItemImageHeight()-2*W;O.translateAndScale(Q,0,0,1),Q.clearRect(0,0,k,u),g.drawStretchImage(Q,g.getImage(E),U,W,W,k,u,F,K),Q.restore()}},validateImpl:function(){var t,d,P,v=this,k=v.$9h,c=v._layout,q=v.$10h,j=v.$4h,C=v._view,A=v.dm();if(v.$13h&&(delete v.$13h,j={},A.each(function(i){j[i.getId()]=i})),"smallicons"===c)for(var f in j){var p=j[f];if(p instanceof a){var N=p.getName()||"",Q=g.getTextSize(g.paletteContentLabelFont,N).width;v.$21h!=n&&v.$21h>Q||(v.$21h=Q)}}for(var f in j){P=j[f];var h,X;if(A.contains(P)){if(P instanceof ht.Group){var m,Y=v.$1h(P),E=q[P.getId()];E&&(m=E.nextSibling,b(C,m),b(C,E)),d=A.getSiblings(P).indexOf(P);var Z=C.children[2*d]||v._79O;Z&&Z.parentNode?(C.insertBefore(Y[0],Z),C.insertBefore(m||Y[1],Z)):(C.appendChild(Y[0]),C.appendChild(m||Y[1])),q[P.getId()]=Y[0],t=k[P.getId()]=m||Y[1],X=P.$12h;var z=P.s("promptText");X||(P.$12h=W("div"),P.$12h[o]=z||"",X=P.$12h),0===P.getChildren().size()?t.contains(X)||M(t,X):t.contains(X)&&b(t,X)}else if(h=P.getParent()){var l=v.$2h(P),J=q[P.getId()];t=k[h.getId()],J&&b(J.parentNode,J),d=A.getSiblings(P).indexOf(P);var T=t.children[d];T?t.insertBefore(l,T):M(t,l),q[P.getId()]=l,v.$14h(P)}}else{var i=q[P.getId()],D=i.parentNode;if(P instanceof ht.Group){var U=i.nextSibling;b(C,i),b(C,U),delete k[P.getId()]}else b(D,i),0===D.children.length&&(h=A.getDataById(D.$11h),X=h.$12h,X&&!D.contains(X)&&M(D,X));delete q[P.getId()]}}v.$4h={};var B=function(){var w=v._59I,u=0;v.$32h!=n&&(clearInterval(v.$32h),u=0,delete v.$32h),v.$32h=setInterval(function(){v.$31h(),w===v._59I?(u++,u>=2&&(clearInterval(v.$32h),delete v.$32h)):(u=0,w=v._59I)},30)};for(var _ in k)if(t=k[_],P=A.getDataById(k[_].$11h),v.$15h(P),v._drawToolsIcon(P),P.isExpanded()){if(t.style.maxHeight===0+w){var H=t.scrollHeight+v._itemMargin+w;e(t).duration(200).set(F,H).set("padding-bottom",v._itemMargin+w).end(function(){return function(){B()}}(H))}else t.style.maxHeight=t.scrollHeight+w;t.style.paddingBottom=v._itemMargin+w}else t.style.maxHeight!==0+w&&e(t).duration(200).set(F,I).set("padding-bottom",I).end(function(){return function(){B()}}(t));v.$28h(),v.$31h()},$31h:function(){for(var b=this,v=b._view,c=0,A=v.children,Z=0;Z<A.length;Z++){var o=A[Z];o.className&&o.className.indexOf("palette-")>=0&&(c+=o.offsetHeight)}b._59I=c,b.$30h=b.$33h(b.ty());var l=b.ty();v.scrollTop=-l,b._29I={x:0,y:-l,width:v.clientWidth,height:v.clientHeight},X(b._79O,Q,-l+w),b._93I()},$33h:function(B){var e=this,V=e._29I.height-e._59I;return V>B&&(B=V),B>0?0:Math.round(B)},redraw:function(){this.$13h||(this.$13h=1,this.iv())},onPropertyChanged:function(E){["autoHideScrollBar","scrollBarSize","scrollBarColor","translateY"].indexOf(E.property)<0&&this.redraw(),"translateY"===E.property&&(this.iv(),this._43o())},findDataByName:function(e){for(var u=this.dm().getDatas(),v=0;v<u.size();v++){var t=u.get(v);if(t.getName()===e)return t}},setDataModel:function(Q){var q=this,J=q._dataModel,b=q._selectionModel;J!==Q&&(J&&(J.umm(q.$6h,q),J.umd(q.$8h,q),J.umh(q.$7h,q),b||J.sm().ums(q.$28h,q)),q._dataModel=Q,Q.mm(q.$6h,q),Q.md(q.$8h,q),Q.mh(q.$7h,q),b?b._21I(Q):Q.sm().ms(q.$28h,q),q.sm().setSelectionMode("single"),q.fp("dataModel",J,Q))},$6h:function(Z){var x=this,G=x._view,q=Z.data,c=x.$4h;"add"===Z.kind?c[q.getId()]=q:"remove"===Z.kind?c[q.getId()]=q:"clear"===Z.kind&&(x.$10h={},x.$9h={},x.$4h={},G[o]=""),x.iv()},$7h:function(o){var g=this,Z=o.data;g.$4h[Z.getId()]=Z,g.iv()},$8h:function(z){var h=this,I=z.data,B=z.property;"expanded"===B?h.iv():(h.$4h[I.getId()]=I,h.iv())},$28h:function(){var v,Q=this,W=Q.sm(),u="palette-item",o=W.ld();this.dm().each(function(O){v=Q.$10h[O.getId()],v&&v[T].indexOf(u)>=0&&(O===o?X(v,d,g.paletteItemSelectBackground):f(v,d))})}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);