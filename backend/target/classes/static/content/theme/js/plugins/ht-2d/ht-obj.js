!function(E,T,y){"use strict";var b="ht",f=E[b],j=null,g=Math,p=g.abs,z=g.max,F=Number.MAX_VALUE,V=f.Default,i=V.getInternal(),Y=V.clone,e=i.vec3TransformMat4,H=i.appendArray,R=function(){var v=/v( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,h=/vt( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,N=/vn( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,R=/f( +\d+)( +\d+)( +\d+)( +\d+)?/,$=/f( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))?/,r=/f( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))?/,w=/f( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))?/,f=function(Z,N){return N=parseInt(N),N>=0?Z[N-1]:Z[N+Z.length]},x=function(k,$,G,U,W,T){if(k.vs){var d=f($,U),o=f($,W),p=f($,T),Q=G.matrix,C=k.vs;if(G.flipFace){var I=o;o=p,p=I}Q?(H(C,e(Y(d),Q)),H(C,e(Y(o),Q)),H(C,e(Y(p),Q))):(H(C,d),H(C,o),H(C,p))}},I=function(s,L,A,d,v,z){if(s.vs){var _=f(L,d),S=f(L,v),E=f(L,z),B=A.flipY;if(A.flipFace){var I=S;S=E,E=I}s.uv.push(_[0],B?1-_[1]:_[1],S[0],B?1-S[1]:S[1],E[0],B?1-E[1]:E[1])}},X=function(F,P,A,L,M,E){if(F.vs){var g=f(P,L),x=f(P,M),v=f(P,E),z=A.normalMatrix,o=F.ns;if(A.flipFace){var D=x;x=v,v=D}z?(H(o,e(Y(g),z)),H(o,e(Y(x),z)),H(o,e(Y(v),z))):(H(o,g),H(o,x),H(o,v))}},D=function(C,P,t,E,S,j,c,b){var H=E&&E.length&&b;j[3]===y?(x(C,P,S,j[0],j[1],j[2]),c&&I(C,t,S,c[0],c[1],c[2]),H&&X(C,E,S,b[0],b[1],b[2])):(x(C,P,S,j[0],j[1],j[3]),x(C,P,S,j[1],j[2],j[3]),c&&(I(C,t,S,c[0],c[1],c[3]),I(C,t,S,c[1],c[2],c[3])),H&&(X(C,E,S,b[0],b[1],b[3]),X(C,E,S,b[1],b[2],b[3])))},k=function(L,l,n,o){var a,c,H,B,Q,j,Y,t=F,W=F,K=F,N=-F,_=-F,Z=-F;for(a in L)for(j=L[a].vs,Y=j.length,c=0;Y>c;c+=3)H=j[c+0],B=j[c+1],Q=j[c+2],t>H&&(t=H),W>B&&(W=B),K>Q&&(K=Q),H>N&&(N=H),B>_&&(_=B),Q>Z&&(Z=Q);if(n){var E=t+(N-t)/2,x=W+(_-W)/2,y=K+(Z-K)/2;for(a in L)for(j=L[a].vs,Y=j.length,c=0;Y>c;c+=3)j[c+0]-=E,j[c+1]-=x,j[c+2]-=y}var k,d,R;n?(k=N-t,d=_-W,R=Z-K):(k=2*z(p(t),p(N)),d=2*z(p(W),p(_)),R=2*z(p(K),p(Z))),o.rawS3=[k,d,R];for(a in L){if(j=L[a].vs,l)for(Y=j.length,c=0;Y>c;c+=3)k&&(j[c+0]/=k),d&&(j[c+1]/=d),R&&(j[c+2]/=R);L[a].rawS3=o.rawS3}};return function(c,L,K){if(!c)return j;i.isString(L)&&(L=u(L)),K||(K={}),K.flipY==j&&(K.flipY=!0),(K.s3||K.r3||K.t3||K.mat)&&(K.matrix=i.createWorldMatrix(K.mat,K.s3,K.r3,K.rotationMode,K.t3));var I,a,S,B,f,y,Z=[],_=[],P=K.ignoreNormal?j:[],p=K.reverseFlipMtls,Y={vs:[],uv:[],ns:P?[]:j},n={htdefault:Y},A=c.split("\n"),s=0;for(P&&K.matrix&&(K.normalMatrix=i.createNormalMatrix(K.matrix));s<A.length;s++)if(a=A[s].trim(),0!==a.length&&"#"!==a.charAt(0))if(S=v.exec(a))Z.push([parseFloat(S[1]),parseFloat(S[2]),parseFloat(S[3])]);else if(S=h.exec(a))_.push([parseFloat(S[1]),parseFloat(S[2])]);else if(P&&(S=N.exec(a)))K.flipFace?P.push([parseFloat(-S[1]),parseFloat(-S[2]),parseFloat(-S[3])]):P.push([parseFloat(S[1]),parseFloat(S[2]),parseFloat(S[3])]);else if(S=R.exec(a))D(Y,Z,_,P,K,[S[1],S[2],S[3],S[4]]);else if(S=$.exec(a))D(Y,Z,_,P,K,[S[2],S[5],S[8],S[11]],[S[3],S[6],S[9],S[12]]);else if(S=r.exec(a))D(Y,Z,_,P,K,[S[2],S[6],S[10],S[14]],[S[3],S[7],S[11],S[15]],[S[4],S[8],S[12],S[16]]);else if(S=w.exec(a))D(Y,Z,_,P,K,[S[2],S[5],S[8],S[11]],j,[S[3],S[6],S[9],S[12]]);else if(/^usemtl /.test(a)&&(B=a.substring(7).trim(),!(Y=n[B]))){if(Y={name:B,vs:[],uv:[],ns:P?[]:j},K.ignoreMtls&&K.ignoreMtls.indexOf(B)>=0&&delete Y.vs,(K.reverseFlip||"*"===p||p&&p.indexOf(B)>=0)&&(Y.reverseFlip=!0),L&&(f=L[B],f&&(K.ignoreColor||(Y.color=f.kd),!K.ignoreTransparent&&f.d>0&&f.d<1&&(Y.transparent=!0,Y.opacity=f.d),!K.ignoreImage&&(y=f.map_kd)))){for(y=y.split(" "),I=0;I<y.length;I++)"-o"===y[I]?(Y.uvOffset=[parseFloat(y[I+1]),parseFloat(y[I+2])],I+=2):"-s"===y[I]&&(Y.uvScale=[parseFloat(y[I+1]),parseFloat(y[I+2])],I+=2);Y.image=(K.prefix||"")+y[y.length-1]}n[B]=Y}var Q=[];for(var E in n){var g=n[E].vs;g&&0!==g.length||Q.push(E)}Q.forEach(function(X){delete n[X]}),k(n,K.cube,K.center,K);var x=K.shape3d;if(x){var F=[];for(var B in n){var Y=n[B];F.rawS3=Y.rawS3,F.push(Y)}V.setShape3dModel(x,F)}return n}}(),u=function(Q){var K={};if(Q)for(var s,i,y,a,Y,h,f=Q.split("\n"),M=/\s+/,j=0;j<f.length;j++)i=f[j].trim(),0!==i.length&&"#"!==i.charAt(0)&&(y=i.indexOf(" "),a=(y?i.substring(0,y):i).toLowerCase(),Y=(y?i.substring(y+1):"").trim(),"newmtl"===a?K[Y]=s={name:Y}:s&&("ka"===a||"kd"===a||"ks"===a?(h=Y.split(M,3),s[a]=[parseFloat(h[0]),parseFloat(h[1]),parseFloat(h[2]),1]):s[a]="ns"===a||"d"===a?parseFloat(Y):Y));return K};i.addMethod(V,{loadObj:function(G,Z,I){I=I||{},V.xhrLoad(Z?[G,Z]:[G],function(H){var C,F=I.finishFunc,q=I.shape3d,l=H?R(H[0],H[1],I):null;if(l){if(q)C=V.getShape3dModel(q);else{C=[];for(var U in l){var j=l[U];C.rawS3=j.rawS3,C.push(j)}}F&&F(l,C,C.rawS3)}else F&&F(null)},I)},parseObj:function(X,B,c){return R(X,B,c)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);