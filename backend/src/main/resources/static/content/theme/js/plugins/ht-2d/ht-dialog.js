!function(N,D){"use strict";var S="ht",X=N[S],W="px",_="left",E="top",Z="bottom",o="right",q="innerHTML",r="className",i="",p="width",R="height",A="string",e="position",h="absolute",v="0",Y="opacity",L="background",K=X.Default,O=K.getInternal(),b=X.Color,T=K.animate,H=K.isTouchable,$=null,k=(Math.sqrt,N.parseInt),u=N.setTimeout,l=(Math.round,b.titleIconBackground),M=function(a){return typeof a===A||a instanceof String},J=function(){return document},B=function(v){return J().createElement(v)},F=function(){var i=B("div");return i.tabIndex=-1,i.style.outline="none",i},d=function(){return B("canvas")},z=function(K,Z){U(K,"-webkit-transform",Z),U(K,"-ms-transform",Z),U(K,"transform",Z)},U=function(t,o,f){t.style.setProperty(o,f,$)},s=function(D,f,O){K.def(X.widget[D],f,O)},G=function(J,V){J.appendChild(V)},n=function(){return J().documentElement},c=function(){return n().clientWidth},a=function(){return n().clientHeight},V=function(g,A,s,v){g.addEventListener(A,s,!!v)},y=function(c){var y=c.touches[0];return y?y:c.changedTouches[0]};O.addMethod(K,{dialogCloseIcon:{width:100,height:100,comps:[{type:"shape",points:[10,10,90,90],segments:[1,2],borderWidth:8,borderColor:l},{type:"shape",points:[90,10,10,90],segments:[1,2],borderWidth:8,borderColor:l}]},dialogMaximizeIcon:{width:100,height:100,comps:[{type:"rect",rect:[10,15,80,75],borderWidth:6,borderColor:l},{type:"rect",rect:[10,10,80,20],background:l}]},dialogRestoreIcon:{width:100,height:100,comps:[{type:"rect",rect:[10,34,56,56],borderWidth:8,borderColor:l},{type:"rect",rect:[10,34,56,14],background:l},{type:"rect",rect:[34,10,56,14],background:l},{type:"rect",rect:[82,10,8,56],background:l},{type:"rect",rect:[66,62,24,8],background:l}]},dialogTitleLabelColor:K.labelSelectColor,dialogTitleLabelFont:(H?"18":"14")+"px arial, sans-serif",dialogContentLabelFont:K.labelFont,dialogTitleBackground:b.titleBackground,dialogHeaderBackground:b.headerBackground,dialogButtonBackground:"#1ABC9C",dialogButtonSelectBackground:"#16A085",dialogButtonLabelColor:"#fff"},!0);var C=function(m){var l=this;l.$1d=m,l.addListeners()};K.def(C,D,{ms_listener:1,getView:function(){return this.$1d.getView()},clear:function(){delete this.$2d,delete this.$3d,delete this.$4d,delete this.$5d},handle_touchstart:function(r){var o=this,J=o.$1d,Q=J.$6d,d=J._config,G=J.$7d,x=r,X=r.target;if(G.contains(X)||K.preventDefault(r),K.isLeftButton(r)){H&&(x=y(r));var i=o.$8d={x:x.pageX,y:x.pageY};o.$9d={x:i.x,y:i.y},!d.maximized&&d.draggable&&Q.contains(X)&&(o.$4d=!0,K.startDragging(o,r)),o.handle_mousemove(r)&&(o.$2d=!0,K.startDragging(o,r)),G.contains(r.target)||J.$41d.focus()}},handle_mousedown:function(E){this.handle_touchstart(E)},handle_touchend:function(p){if(K.isLeftButton(p)&&!this.$5d&&!this.$3d){var T=this,d=T.$1d,V=p.target,N=d._config,C=d.$18d,z=d.$16d;for(N.closable&&C.contains(V)&&d.hide(),N.maximizable&&z.contains(V)&&(N.maximized?d.restore():d.maximize());V&&(V.className||"").indexOf("dialog-button")<0;)V=V.parentNode;V&&V.buttonItem&&d.action&&d.action(V.buttonItem,p),delete T.$8d,delete T.$9d}},handle_mouseup:function(C){this.handle_touchend(C)},handleWindowTouchEnd:function(u){var Y=this,f=Y.$1d,Z=f.$10d;Y.$2d&&Y.$3d?Z.fire({kind:"endResize",target:f,originEvent:u}):Y.$4d&&Y.$5d&&Z.fire({kind:"endMove",target:f,originEvent:u}),this.clear()},handleWindowMouseUp:function(U){this.handleWindowTouchEnd(U)},handle_mousemove:function(z){var e=this.$1d._config;if(e.maximized)return!1;if("w"!==e.resizeMode&&"h"!==e.resizeMode&&"wh"!==e.resizeMode)return!1;var r=this,I=r.getView(),W=I.querySelector(".resize-area"),m=W.getBoundingClientRect(),B={x:m.left,y:m.top,width:m.width,height:m.height};z=H?y(z):z;var x=z.clientX,C=z.clientY,k={x:x,y:C};return K.containsPoint(B,k)?(U(I,"cursor","nwse-resize"),!0):(U(I,"cursor",i),void 0)},handleWindowTouchMove:function(j){j.preventDefault();var l=j;H&&(l=y(j));var v=this,V=v.$8d,s=v.$9d;if(!(s.x==V.x&&s.y==V.y&&K.getDistance(s,{x:l.pageX,y:l.pageY})<=1)){var Z=v.$1d,n=Z._config,J=Z.$21d,R=n.resizeMode||"wh",I=l.pageX-V.x,F=l.pageY-V.y;if(v.$2d){var h=J.offsetWidth,X=J.offsetHeight,D=h+I,z=X+F;if(D=Math.max(D,50),z=Math.max(z,50),"center"===n.position||n.position==$){var o={},m=J.getBoundingClientRect();o.x=m.left,o.y=m.top,n.position=o}"w"===R?(Z.setSize(D,X),V.x+=D-h):"h"===R?(Z.setSize(h,z),V.y+=z-X):"wh"===R&&(Z.setSize(D,z),V.x+=D-h,V.y+=z-X),v.$3d?Z.$10d.fire({kind:"betweenResize",target:Z,originEvent:j}):(v.$3d=!0,Z.$10d.fire({kind:"beginResize",target:Z,originEvent:j}))}else if(v.$4d){var d=J.getBoundingClientRect(),q=d.width,f=d.height,G=c(),C=a(),p=k(J.style.left)||0,L=k(J.style.top)||0,u=p+I,S=L+F,g=Z.adjustPosition({x:u,y:S},{width:q,height:f},{width:G,height:C});g&&(u=g.x,S=g.y);var t=u-p,P=S-L;U(J,_,u+W),U(J,E,S+W),V.x+=t,V.y+=P,n.position={x:u,y:S},v.$5d?Z.$10d.fire({kind:"betweenMove",target:Z,originEvent:j}):(v.$5d=!0,Z.$10d.fire({kind:"beginMove",target:Z,originEvent:j}))}}},handleWindowMouseMove:function(e){this.handleWindowTouchMove(e)},handleWindowResize:function(){var s=this,y=s,I=y._config,L=y.$21d,m=c(),$=a(),t=I.width,q=I.height,g=I.position||"center";I.maximized?(U(L,p,m+W),U(L,R,$+W),U(L,E,v),U(L,_,v)):(U(L,p,t+W),U(L,R,q+W),"center"===g?(U(L,_,(m-t)/2+W),U(L,E,($-q)/2+W)):(U(L,_,g.x+W),U(L,E,g.y+W))),y.iv()},handle_mousewheel:function(I){I.stopPropagation()},handle_DOMMouseScroll:function(C){C.stopPropagation()}}),X.widget.Dialog=function(M){var P=this,F=P._view=O.createView(null,P);F[r]="ht-widget-dialog",U(F,e,h),K.baseZIndex!=$&&U(F,"z-index",K.baseZIndex+"");var Z=P.$11d=new C(P);P.bindingHandleWindowResize=Z.handleWindowResize.bind(P),P.$10d=new X.Notifier,M&&P.setConfig(M)},s("Dialog",D,{ms_v:1,setTitle:function(n){this._config.title=n,this.getView().querySelector(".dialog-container-title span").innerHTML=n},$31d:function(){var c=this,Z=c.$6d=F(),v=c._config,t=c.$12d=c.$13d();Z[r]="dialog-container-title",U(Z,"cursor","default"),U(Z,"white-space","nowrap"),U(Z,"overflow","hidden"),U(Z,"font",K.dialogTitleLabelFont),U(Z,L,v.titleBackground||K.dialogTitleBackground),U(Z,"color",v.titleColor||K.dialogTitleLabelColor);var M=B("span"),u=c.$25d();if(v.titleAlign&&U(Z,"text-align",v.titleAlign),v.titleIcon){var e=c.$14d=c.$15d();G(Z,e)}if(M[q]=v.title||"&nbsp;",G(Z,M),v.maximizable){var i=c.$16d=c.$17d();G(t,i)}if(v.closable){var I=c.$18d=c.$19d();G(t,I)}return G(Z,t),U(Z,"display","block"),U(Z,"line-height",u+W),Z},$13d:function(){var V=F();return U(V,e,h),U(V,_,v),U(V,o,5+W),U(V,E,v),U(V,Z,v),U(V,"text-align",o),U(V,"white-space","nowrap"),V[r]="dialog-title-controls",V},$20d:function(){var N=this.$21d=F(),D=this._config,k=D.borderWidth;return U(N,e,"fixed"),U(N,"box-shadow","rgba(0, 0, 0, 0.2) 0px 5px 10px 0px"),U(N,"padding",v+" "+k+W+" "+k+W+" "+k+W),U(N,"box-sizing","border-box"),U(N,"-moz-box-sizing","border-box"),N[r]="dialog-container",U(N,L,D.titleBackground||K.dialogTitleBackground),N},$22d:function(){var m,w=this,T=w._config,k=w.$7d=F(),y=T.content,I=0,g=T.contentPadding||0;T.buttons!=$&&T.buttons.length>0&&(I=32),M(y)?k[q]=y:y.getView?(m=y.getView(),G(k,m)):(m=y,G(k,m)),U(k,e,h),U(k,"font",K.dialogContentLabelFont),X.Default.appendToScreen(k);var N=k.offsetWidth+1,H=k.offsetHeight,S=w.$25d();return T.width==$&&(T.width=N+10+2*g),T.height==$&&(T.height=H+S+I+5+2*g),X.Default.removeHTML(k),m&&(U(m,"box-sizing","border-box"),U(m,"-moz-box-sizing","border-box"),U(m,p,"100%"),U(m,R,"100%")),k[r]="dialog-content",U(k,E,S+g+W),U(k,Z,I+g+W),U(k,_,g+W),U(k,o,g+W),U(k,"overflow","hidden"),k},$23d:function(){var z=this.$41d=F();return z[r]="dialog-overlay",U(z,p,"100%"),U(z,R,"100%"),U(z,e,"fixed"),U(z,E,v),U(z,_,v),U(z,L,"rgba(235, 235, 235, 0.7)"),z},_config:$,setSize:function(s,m){var C=this,v=C._config;v&&(v.width=s,v.height=m,C.isShowing()&&(C.bindingHandleWindowResize(),C.iv()))},getConfig:function(){return this._config},$24d:function(){var V=this._config,b=V.titleIconSize||16;return H&&(b*=1.2),b},$25d:function(){var _=this._config,L=_.titleHeight||K.widgetTitleHeight;return L},$26d:function(L){U(L,"cursor","pointer"),U(L,"display","inline-block"),U(L,"margin-right",(H?8:4)+W),U(L,"vertical-align",E)},$27d:function(){var I=this.$30d=F(),n=10;return H&&(n=20),U(I,p,n+W),U(I,R,n+W),U(I,e,h),U(I,Z,v),U(I,o,v),I[r]="resize-area",I},$15d:function(){var x=this,y=d();y[r]="dialog-title-control dialog-title-control-icon";var E=x.$25d(),e=x.$24d();return x.$26d(y),O.setCanvas(y,e,E),y},$17d:function(){var z=d();z[r]="dialog-title-control dialog-title-control-maximize";var S=this.$25d(),w=this.$24d();return this.$26d(z),O.setCanvas(z,w,S),z},$19d:function(){var J=d();J[r]="dialog-title-control dialog-title-control-close";var t=this.$25d(),x=this.$24d();return this.$26d(J),O.setCanvas(J,x,t),J},$28d:function(){var S=F();return U(S,L,"white"),U(S,p,"100%"),U(S,R,"100%"),U(S,e,"relative"),S},$29d:function(){var j=this,a=F();U(a,"line-height",32+W),U(a,e,h),U(a,Z,v),U(a,_,v),U(a,"white-space","nowrap"),U(a,"overflow","hidden"),U(a,o,v),U(a,L,K.dialogHeaderBackground),a[r]="dialog-container-buttons";var s=this._config,w=s.buttonsAlign||o,x=0;return U(a,"text-align",w),j.$42d=[],s.buttons.forEach(function(d){var R=new X.widget.Button,Y=R.getView();Y[r]="dialog-button "+d.className,Y.buttonItem=d,j.$42d.push(R),R.setBorderColor($),R.setBackground(K.dialogButtonBackground),R.setSelectBackground(K.dialogButtonSelectBackground),R.setLabelColor(K.dialogButtonLabelColor),U(Y,e,"static"),U(Y,"display","inline-block"),U(Y,"text-align",_),U(Y,"height",24+W);var A=H?10:5;w===_||w===o?U(Y,"margin-"+w,A+W):0===x||U(Y,"margin-"+_,A+W),U(Y,"vertical-align","middle");var T=K.getTextSize(R.getLabelFont(),d.label).width+10;R.onClicked=function(a){d.action&&d.action.call(j,d,a)},R.setLabel(d.label),U(Y,p,T+W),G(a,R.getView()),x++}),a},setConfig:function(t){if(t){var b=this,_=b._view;b._config=t,b.action=t.action,_[q]=i,t.borderWidth==$&&(t.borderWidth=5);var w=b.$23d(),E=b.$28d(),C=b.$31d(),L=b.$22d(),X=b.$20d(),F=b.$30d=b.$27d();if(G(_,w),G(_,X),G(X,E),G(E,C),G(E,L),t.buttons!=$&&t.buttons.length>0){var Z=b.$29d();G(E,Z)}G(X,F),t.maximized?(t.maximized=!1,b.bindingHandleWindowResize(),b.maximize(!0)):b.bindingHandleWindowResize(),b.isShowing()&&b.iv()}},hide:function(){var d=this,U=d.$21d,x=d.$41d,z=d._view;z[r]="ht-widget-dialog",T(U).duration(200).scale(.7).set(Y,v).end(function(){d.onHidden&&d.onHidden(),X.Default.removeHTML(z),d.$10d.fire({kind:"hide",target:d})}),T(x).duration(200).set(Y,v).end(),N.removeEventListener("resize",d.bindingHandleWindowResize)},isShowing:function(){return!!this._view.parentNode},setModal:function(g){this.$41d.style.display=g?"block":"none"},isModal:function(){return"none"!==this.$41d.style.display},$32d:function(){var n=this,b=n._config,a=n.$21d;z(a,i),n.iv(),b.maximized?n.$10d.fire({kind:"maximize",target:n}):n.$10d.fire({kind:"restore",target:n})},maximize:function(f){var g=this,A=g.$21d,S=g._config;if(!S.maximized){S.maximized=!0,g.$33d(),g.$16d[r]="dialog-title-control dialog-title-control-minimize";var L=c(),m=a(),V=S.width,Z=S.height,w=k(A.style.left)||0,h=k(A.style.top)||0;g.$36d=V,g.$37d=Z,g.$34d=w,g.$35d=h;var q=f?0:200;T(A).duration(q).set(_,v).set(E,v).set(p,L+W).set(R,m+W).end(function(){g.$32d()})}},restore:function(){var F=this,h=F.$34d,Q=F.$35d,P=F.$36d,k=F.$37d,V=F._config;if(V.maximized&&(V.maximized=!1,F.$33d(),F.$16d[r]="dialog-title-control dialog-title-control-maximize",F.isShowing()&&h!=$&&Q!=$&&P!=$&&k!=$)){var H=F.$21d;T(H).duration(200).set(_,h+W).set(E,Q+W).set(p,P+W).set(R,k+W).end(function(){F.$32d()})}delete F.$34d,delete F.$35d,delete F.$36d,delete F.$37d},show:function(){var J=this,G=J._view,k=J._config,P=J.$21d,g=J.$41d;k&&k.zIndex!=$&&U(G,"z-index",k.zIndex+i),X.Default.appendToScreen(G),z(P,"scale(0.7)"),U(P,Y,v),J.iv(),J.validate(),J._view[r]+=" dialog-show",u(function(){T(P).duration(200).scale(1).set(Y,"1").end(function(){U(P,p,P.clientWidth+W),U(P,R,P.clientHeight+W),J.onShown&&J.onShown(),J.$10d.fire({kind:"show",target:J})}),T(g).duration(200).set(Y,"1").end(),V(N,"resize",J.bindingHandleWindowResize)},30)},setPosition:function(Y){var W=this.$21d;W.style.left=Y.x+"px",W.style.top=Y.y+"px"},addEventListener:function(L,b,f){this.$10d.add(L,b,f)},removeEventListener:function(g,$){this.$10d.remove(g,$)},$38d:function(F,T,N,i){var P=O.initContext(F);O.translateAndScale(P,0,0,1),P.clearRect(0,0,N,N);var m=(N-i)/2;K.drawStretchImage(P,K.getImage(T),"fill",0,m,i,i),P.restore()},$33d:function(){var E=this,M=E._config,B=E.$16d,j=M.maximized?K.dialogRestoreIcon:K.dialogMaximizeIcon;if(B&&j){var f=E.$25d(),b=E.$24d();E.$38d(B,K.getImage(j),f,b)}},$39d:function(){var r=this,g=r._config,B=r.$14d,R=g.titleIcon;if(B&&R){var E=r.$25d(),A=r.$24d();r.$38d(B,K.getImage(R),E,A)}},$40d:function(){var L=this,q=L.$18d,n=K.dialogCloseIcon;if(q&&n){var u=L.$25d(),g=L.$24d();L.$38d(q,K.getImage(n),u,g)}},invalidate:function(H){var J=this,p=J.$42d;J._68I||(J._68I=1,K.callLater(J.validate,J,$,H),J.onInvalidated&&J.onInvalidated(),J.fireViewEvent("invalidate"));var h=J._config.content;h.invalidate&&h.invalidate(),p&&p.forEach(function(F){F.iv()})},validateImpl:function(){var o=this;o.$40d(),o.$33d(),o.$39d()},adjustPosition:function(Z,g,n){var B=g.width,P=g.height,Q=n.width,K=n.height,V=Z.x,i=Z.y,x=this._config,E=x.minDragSize||20;return"inside"===x.dragMode?(V+B>Q&&(V=Q-B),i+P>K&&(i=K-P),0>V&&(V=0),0>i&&(i=0)):(null==x.dragMode||"none"===x.dragMode)&&(-B+E>V&&(V=-B+E),V>Q-E&&(V=Q-E),i>K-E&&(i=K-E),0>i&&(i=0)),{x:V,y:i}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);