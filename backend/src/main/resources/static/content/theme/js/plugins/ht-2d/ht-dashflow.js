!function(e){"use strict";var n="ht",P=e[n],L=P.Default,N=Math,U=(N.PI,N.sin,N.cos,N.atan2,N.sqrt,N.max),c=N.floor,t=(N.round,N.ceil),h=P.Shape,_=(P.Edge,P.List),Q=P.Style,C=P.graph,W=L.getInternal(),M=W.ui(),m=null,u="prototype",b=e.clearInterval,f=e.setInterval,S=function(L){var t=L.data,H=this.dm();if(t&&"add"===L.kind){var p=H.$1c,J=t instanceof h?"shape.":"edge.";p&&t.s(J+"dash.flow")&&p.indexOf(t)<0&&p.push(t)}"clear"===L.kind&&(H.$1c=[])},E=function(X){var V=X.property,F=X.data,O=X.newValue,p=this.dm().$1c,P=F instanceof h?"s:shape.dash.flow":"s:edge.dash.flow";if(p&&V===P)if(O)p.indexOf(F)<0&&p.push(F);else for(var n=p.length,l=0;n>l;l++)if(p[l]===F){p.splice(l,1);break}},Z=C.GraphView[u],a=M.EdgeUI[u],v=M.ShapeUI[u],J=v._80o,k=a._80o,F=P.DataModel[u],g=F.prepareRemove,z=Z.setDataModel;Q["edge.dash.flow.step"]==m&&(Q["edge.dash.flow.step"]=3),Q["shape.dash.flow.step"]==m&&(Q["shape.dash.flow.step"]=3),F.prepareRemove=function(l){g.call(this,l);var D=l._dataModel,M=D.$1c;if(M)for(var j=M.length,U=0;j>U;U++)if(M[U]===l){M.splice(U,1);break}},Z.setDataModel=function(d){var j=this,q=j._dataModel;if(q!==d){q&&(q.umm(S,j),q.umd(E,j),q.$1c=[]),d.mm(S,j),d.md(E,j);var o=d.$1c=[];d.each(function(s){var i=s instanceof h?"shape.":"edge.";s.s(i+"dash.flow")&&o.indexOf(s)<0&&o.push(s)}),z.call(j,d)}},Z.setDashFlowInterval=function(t){var h=this,k=h.$2c;h.$2c=t,h.fp("dashFlowInterval",k,t),h.$3c!=m&&(b(h.$3c),delete h.$3c,h.enableDashFlow(t))},Z.getDashFlowInterval=function(){return this.$2c},Z.$4c=function(){var i,d,e,z=this,k=z.tx(),D=z.ty(),j=z._zoom,G=z.getWidth(),Z=z.getHeight(),h={x:-k/j,y:-D/j,width:G/j,height:Z/j},R=z.dm().$1c,v=z._56I,Q=new _;if(R.forEach(function(n){v[n.getId()]&&(i=z.getDataUI(n),i&&(e=i._79o(),e&&Q.add(e)))}),0!==Q.size()&&(Q.each(function(Z){L.intersectsRect(h,Z)&&(d=L.unionRect(d,Z))}),d&&(d&&(L.grow(d,U(1,1/j)),d.x=c(d.x*j)/j,d.y=c(d.y*j)/j,d.width=t(d.width*j)/j,d.height=t(d.height*j)/j,d=L.intersection(h,d)),d))){var l=z._canvas.getContext("2d");l.save(),l.lineCap=L.lineCap,l.lineJoin=L.lineJoin,W.translateAndScale(l,k,D,j),l.beginPath(),l.rect(d.x,d.y,d.width,d.height),l.clip(),l.clearRect(d.x,d.y,d.width,d.height),z.$5c(l,d),l.restore()}},Z.$5c=function(K,S){var k,h,P=this;P._93db(K),P.each(function(i){P._56I[i._id]&&(k=P.getDataUI(i),k&&(h=k._79o(),(!S||L.intersectsRect(S,h))&&(k.$7c=!0,k._42(K),delete k.$7c)))}),P._92db(K)},Z.enableDashFlow=function($){var t=this;t.$3c==m&&(t.$3c=f(function(){t.$4c()},$||t.$2c||50))},Z.disableDashFlow=function(){var S=this;b(S.$3c),delete S.$3c};var $=function(){var A=this,d=A._data,o=d instanceof h?"shape.":"edge.",x=d.s(o+"dash.pattern"),B=d.s(o+"dash.flow.reverse");if(x&&d.s(o+"dash")&&d.s(o+"dash.flow")&&A.$7c){var k=A.s(o+"dash.offset")||0,O=d.s(o+"dash.flow.step"),y=d.getStyleMap(),K=0;x.forEach(function(M){K+=M}),B&&(O=-O),k-=O,k%=K,y||(d._styleMap=y={}),y[o+"dash.offset"]=k}};a._80o=function(x){k.call(this,x),$.call(this)},v._80o=function(G){J.call(this,G),$.call(this)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);