<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mom.XUMD4020">
   <select id="get_defaultInfo1" parameterType="java.util.HashMap"  resultType="com.mom.dto.LowerHashMap" fetchSize="1000">
       SELECT MCD.COMPANY_CD
     , MCD.COMPANY_NM
     , MCD.DIVISION_CD
     , MCD.DIVISION_NM
     , MS.SHIFT_CD 
     , MS.SHIFT_NM 
     , MS.START_TIME
     , MS.END_TIME
     , MS.WORK_TIME 
     , MS.MAIN_SHIFT_YN
     , MS.USE_YN
     , MS.DESCRIPTION
     , MS.UPDATE_BY
     ,(SELECT MOM_COMMON_PKG.FN_GET_USER_NAME(MS.COMPANY_CD, MS.DIVISION_CD, MS.UPDATE_BY) FROM DUAL ) AS UPDATEBYNM
     , TO_CHAR(MS.UPDATE_DATE ,'YYYY-MM-DD HH24:MI:SS') AS UPDATE_DATE
	  FROM   MOM_COM_DIV_V MCD
		   , MOM_SHIFT  MS
	  WHERE  MCD.COMPANY_CD    = MS.COMPANY_CD
	  AND    MCD.DIVISION_CD   = MS.DIVISION_CD   
	  AND    MCD.COMPANY_CD    = #{companyCd, jdbcType=VARCHAR}
	  AND    MCD.DIVISION_CD   = #{divisionCd, jdbcType=VARCHAR}	  
    <if test="shiftCd != null and shiftCd != ''">
	  AND MS.SHIFT_CD  IN (${shiftCd})
	</if>
	<if test="useYn != null and useYn != ''">
	  AND MS.USE_YN = #{useYn, jdbcType=VARCHAR}
	</if>   
      ORDER BY MCD.COMPANY_NM, MCD.DIVISION_NM, MS.SHIFT_NM 
  </select>
  <select id="get_defaultInfo2" parameterType="java.util.HashMap"  resultType="com.mom.dto.LowerHashMap" fetchSize="1000">
      SELECT MCD.COMPANY_CD
	       , MCD.COMPANY_NM
	       , MCD.DIVISION_CD
	       , MCD.DIVISION_NM
	       , MSD.SHIFT_CD 
	       , (SELECT MOM_COMMON_PKG.FN_GET_SHIFT_NAME(MSD.COMPANY_CD, MSD.DIVISION_CD, MSD.SHIFT_CD) FROM DUAL ) AS SHIFT_NM
	       , MSD.SHIFT_DETAIL_CD
	       , MSD.SHIFT_DETAIL_NM 
	       , MSD.START_TIME
	       , MSD.END_TIME
	       , MSD.WORK_TIME 
	       , MSD.USE_YN
	       , MSD.DESCRIPTION
	       , MSD.UPDATE_BY
	       ,(SELECT MOM_COMMON_PKG.FN_GET_USER_NAME(MSD.COMPANY_CD, MSD.DIVISION_CD, MSD.UPDATE_BY) FROM DUAL ) AS UPDATEBYNM
	       , TO_CHAR(MSD.UPDATE_DATE ,'YYYY-MM-DD HH24:MI:SS') AS UPDATE_DATE
		FROM   MOM_COM_DIV_V MCD
		     , MOM_SHIFT_DETAIL  MSD
		WHERE  MCD.COMPANY_CD     = MSD.COMPANY_CD
		AND    MCD.DIVISION_CD    = MSD.DIVISION_CD  
		AND    MCD.COMPANY_CD     = #{companyCd, jdbcType=VARCHAR}
	    AND    MCD.DIVISION_CD    = #{divisionCd, jdbcType=VARCHAR}
	    AND    MSD.SHIFT_CD       = #{shiftCd, jdbcType=VARCHAR}
		ORDER BY MCD.COMPANY_NM, MCD.DIVISION_NM , MSD.SHIFT_DETAIL_NM  
  </select>
    <select id="get_defaultInfo3" parameterType="java.util.HashMap"  resultType="com.mom.dto.LowerHashMap" fetchSize="1000">
        SELECT MCD.COMPANY_CD
		     , MCD.COMPANY_NM
		     , MCD.DIVISION_CD
		     , MCD.DIVISION_NM
		     , MM.SHIFT_CD 
		     , (SELECT MOM_COMMON_PKG.FN_GET_SHIFT_NAME(MM.COMPANY_CD, MM.DIVISION_CD, MM.SHIFT_CD) FROM DUAL ) AS SHIFT_NM
		     , MM.REST_TIME_CD
		     , MT.REST_TIME_NM
		     , MT.START_TIME
		     , MT.END_TIME
		     , MT.REST_TIME
		     , MM.USE_YN
		     , MM.DESCRIPTION
		     , MM.UPDATE_BY
		     ,(SELECT MOM_COMMON_PKG.FN_GET_USER_NAME(MM.COMPANY_CD, MM.DIVISION_CD, MM.UPDATE_BY) FROM DUAL ) AS UPDATEBYNM
		     , TO_CHAR(MM.UPDATE_DATE ,'YYYY-MM-DD HH24:MI:SS') AS UPDATE_DATE
		FROM   MOM_COM_DIV_V MCD
		     , MOM_SHIFT_REST_TIME_MAP MM
		     , MOM_SHIFT_REST_TIME MT
		WHERE  MCD.COMPANY_CD     = MM.COMPANY_CD
		AND    MCD.DIVISION_CD    = MM.DIVISION_CD   
		AND    MM.COMPANY_CD     = MT.COMPANY_CD
		AND    MM.DIVISION_CD    = MT.DIVISION_CD 
		AND    MM.REST_TIME_CD   = MT.REST_TIME_CD
		AND    MM.COMPANY_CD     = #{companyCd, jdbcType=VARCHAR}
	    AND    MM.DIVISION_CD    = #{divisionCd, jdbcType=VARCHAR}
	    AND    MM.SHIFT_CD       = #{shiftCd, jdbcType=VARCHAR}		
        ORDER BY MCD.COMPANY_NM, MCD.DIVISION_NM , MT.REST_TIME_NM

  </select>
</mapper>
